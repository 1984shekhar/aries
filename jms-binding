<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <link rel="stylesheet" href="site.css" type="text/css">



    <title>ServiceMix - jms-binding</title>
  </head>

  <body>
    <table width="100%" id="layout" style="padding:0px;margin0px;border-collapse:collapse;">
      <tr>
        <td colspan="3" style="padding:8px;">
          <table width="100%" id="banner" style="padding:0px;margin:0px">
            <tr id="header_row">
              <td align="left" valign="middle" style="padding:0px;margin:0px;">
                <span id="Content"><span><span class="nobr"><a href="http://incubator.apache.org/servicemix" rel="nofollow"><img align="absmiddle" border=0 src="images/logo.gif"></a></span></span></span>

              </td>
              
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td colspan="3" id="breadcrumbs">
          <table width="100%" id="banner" style="padding:0px;margin:0px">
            <tr>
              <td align="left">
                <a href="">Home</a>  | <a href="Navigation">Navigation</a> &gt; <a href="Examples">Examples</a> &gt; jms-binding
              </td>
              <td align="right">
                  <span id="Content"><span><a href="Download" title="Download">Download</a> | <span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix-core/apidocs/" rel="nofollow">JavaDocs</a></span> | <a href="Source" title="Source">Source</a> | <span class="nobr"><a href="http://docs.codehaus.org/pages/listpages.action?key=SM" rel="nofollow">Wiki</a></span> |<span class="nobr"><a href="irc://irc.codehaus.org/servicemix" rel="nofollow">IRC</a></span> | <span class="nobr"><a href="http://servlet.uwyn.com/drone/log/hausbot/servicemix" rel="nofollow">IRC Log</a></span> | <a href="Mailing+Lists" title="Mailing Lists">Mailing Lists</a> | <span class="nobr"><a href="http://forums.logicblaze.com/forums/show/3.page" rel="nofollow">Discussion Forum</a></span>| <span class="nobr"><a href="http://jira.logicblaze.com/jira/browse/SM" rel="nofollow">Support</a></span></span></span>

              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td id="leftColumn" valign="top" style="padding-top: 0px;">
          <span id="Content"><h3><a name="Navigation-Overview"></a>Overview</h3>
  <ul class="alternate" type="square">
    <li><a href="Home" title="Home">Home</a></li>
    <li><a href="Introduction+to+ESB" title="Introduction to ESB">Introduction to ESB</a></li>
    <li><a href="Background+to+ServiceMix" title="Background to ServiceMix">Background to ServiceMix</a></li>
    <li><a href="News" title="News">News</a></li>
    <li><a href="FAQ" title="FAQ">FAQ</a></li>
    <li><a href="Download" title="Download">Download</a></li>
  </ul>
  <h3><a name="Navigation-Community"></a>Community</h3>
  <ul class="alternate" type="square">
    <li><span class="nobr"><a href="http://docs.codehaus.org/pages/listpages.action?key=SM" rel="nofollow">Wiki</a></span></li>
    <li><a href="Mailing+Lists" title="Mailing Lists">Mailing Lists</a></li>
    <li><a href="Contributing" title="Contributing">Contributing</a></li>
    <li><a href="Team" title="Team">Team</a></li>
    <li><a href="Users" title="Users">Users</a></li>
  </ul>
  <h3><a name="Navigation-Documentation"></a>Documentation</h3>
  <ul class="alternate" type="square">
    <li><a href="Getting+Started" title="Getting Started">Getting Started</a></li>
    <li><a href="Running" title="Running">Running</a></li>
    <li><a href="Examples" title="Examples">Examples</a></li>
    <li><a href="Use+Cases" title="Use Cases">Use Cases</a></li>
    <li><a href="Configuration" title="Configuration">Configuration</a></li>
    <li><a href="Xml+Reference" title="Xml Reference">Xml Reference</a></li>
    <li><a href="Management" title="Management">Management</a></li>
    <li><a href="Architecture" title="Architecture">Architecture</a></li>
    <li><a href="Clustering" title="Clustering">Clustering</a></li>
    <li><a href="NMR+Flows" title="NMR Flows">NMR Flows</a></li>
    <li><a href="Articles" title="Articles">Articles</a></li>
  </ul>
  <h3><a name="Navigation-Reference"></a>Reference</h3>
  <ul class="alternate" type="square">
    <li><span class="nobr"><a href="http://java.sun.com/integration/1.0/docs/sdk/api/index.html" rel="nofollow">JBI API</a></span></li>
    <li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix-core/apidocs/" rel="nofollow">JavaDocs</a></span></li>
    <li><a href="Glossary" title="Glossary">Glossary</a></li>
  </ul>
  <h3><a name="Navigation-Features"></a>Features</h3>
  <ul class="alternate" type="square">
    <li><a href="Components" title="Components">Components</a></li>
    <li><a href="Routing" title="Routing">Routing</a></li>
    <li><a href="Transformation" title="Transformation">Transformation</a></li>
    <li><a href="Spring+Client+Toolkit" title="Spring Client Toolkit">Spring Client Toolkit</a></li>
    <li><a href="Client+API" title="Client API">Client API</a></li>
    <li><a href="POJO+support" title="POJO support">POJO support</a></li>
    <li><a href="Expressions" title="Expressions">Expressions</a></li>
    <li><a href="Component+helper+classes" title="Component helper classes">Component helper classes</a></li>
    <li><a href="Ant+Tasks" title="Ant Tasks">Ant Tasks</a></li>
    <li><a href="JMX+Console" title="JMX Console">JMX Console</a></li>
  </ul>
  <h3><a name="Navigation-Integration"></a>Integration</h3>
  <ul class="alternate" type="square">
    <li><a href="Spring+support" title="Spring support">Spring support</a></li>
    <li><a href="Geronimo+Integration" title="Geronimo Integration">Geronimo Integration</a></li>
    <li><a href="JBoss+Deployer" title="JBoss Deployer">JBoss Integration</a></li>
    <li><a href="Tomcat+Integration" title="Tomcat Integration">Tomcat Integration</a></li>
    <li><a href="JNDI+configuration" title="JNDI configuration">JNDI configuration</a></li>
  </ul>
  <h3><a name="Navigation-ServiceMixComponents"></a>ServiceMix Components</h3>
  <ul class="alternate" type="square">
    <li><a href="BPEL" title="BPEL">BPEL</a></li>
    <li><a href="Cache" title="Cache">Cache</a></li>
    <li><a href="Drools" title="Drools">Drools</a></li>
    <li><a href="Email" title="Email">Email</a></li>
    <li><a href="File" title="File">File</a></li>
    <li><a href="FTP" title="FTP">FTP</a></li>
    <li><a href="Groovy" title="Groovy">Groovy</a></li>
    <li><a href="HTTP" title="HTTP">HTTP</a></li>
    <li><a href="Jabber" title="Jabber">Jabber</a></li>
    <li><a href="JAX+WS" title="JAX WS">JAX WS</a></li>
    <li><a href="JCA" title="JCA">JCA</a></li>
    <li><a href="JMS" title="JMS">JMS</a></li>
    <li><a href="Quartz" title="Quartz">Quartz</a></li>
    <li><a href="Reflection" title="Reflection">Reflection</a></li>
    <li><a href="RSS" title="RSS">RSS</a></li>
    <li><a href="SAAJ" title="SAAJ">SAAJ</a></li>
    <li><a href="Scripting" title="Scripting">Scripting</a></li>
    <li><a href="ServiceMix" title="ServiceMix">ServiceMix</a></li>
    <li><a href="Validation" title="Validation">Validation</a></li>
    <li><a href="XFire" title="XFire">XFire</a></li>
    <li><a href="XPath+Router" title="XPath Router">XPath Router</a></li>
    <li><a href="XSLT" title="XSLT">XSLT</a></li>
    <li><a href="XSQL" title="XSQL">XSQL</a></li>
    <li><a href="VFS" title="VFS">VFS</a></li>
    <li><a href="WSIF" title="WSIF">WSIF</a></li>
  </ul>
  <h3><a name="Navigation-Tooling"></a>Tooling</h3>
  <ul class="alternate" type="square">
    <li><a href="Eclipse+plugin" title="Eclipse plugin">Eclipse plugin</a></li>
    <li><a href="JBoss+Deployer" title="JBoss Deployer">JBoss Deployer</a></li>
    <li><a href="WAR+Deployment" title="WAR Deployment">WAR Deployment</a></li>
    <li><a href="Maven+JBI+plugin" title="Maven JBI plugin">Maven JBI plugin</a></li>
    <li><a href="Maven+SAR+plugin" title="Maven SAR plugin">Maven SAR plugin</a></li>
  </ul>
  <h3><a name="Navigation-Utilities"></a>Utilities</h3>
  <ul class="alternate" type="square">
    <li><a href="Reflection" title="Reflection">Reflection</a></li>
  </ul>
  <h3><a name="Navigation-OtherJBIsoftware"></a>Other JBI software</h3>
  <ul class="alternate" type="square">
    <li><span class="nobr"><a href="http://forge.objectweb.org/projects/celtix/" rel="nofollow">Celtix</a></span></li>
    <li><span class="nobr"><a href="http://pxe.fivesight.com/wiki/display/PXE/Home" rel="nofollow" title="Visit page outside Confluence">PXE BPEL Engine</a></span></li>
  </ul>
  <h3><a name="Navigation-RelatedProjects"></a>Related Projects</h3>
  <ul class="alternate" type="square">
    <li><span class="nobr"><a href="http://activemq.codehaus.org/" rel="nofollow">ActiveMQ</a></span></li>
    <li><span class="nobr"><a href="http://jencks.org/" rel="nofollow">Jencks</a></span></li>
    <li><span class="nobr"><a href="http://lingo.codehaus.org/" rel="nofollow">Lingo</a></span></li>
    <li><span class="nobr"><a href="http://activesoap.codehaus.org/" rel="nofollow">ActiveSOAP</a></span></li>
    <li><span class="nobr"><a href="http://www.springframework.org/" rel="nofollow">Spring</a></span></li>
    <li><span class="nobr"><a href="http://geronimo.apache.org/" rel="nofollow">Geronimo</a></span></li>
  </ul>
  <h3><a name="Navigation-Support"></a>Support</h3>
  <ul class="alternate" type="square">
    <li><span class="nobr"><a href="http://jira.logicblaze.com/jira/browse/SM" rel="nofollow">Issues</a></span></li>
    <li><span class="nobr"><a href="http://jira.logicblaze.com/browse/SM?report=com.atlassian.jira.plugin.system.project:roadmap-panel" rel="nofollow">Roadmap</a></span></li>
    <li><span class="nobr"><a href="http://jira.logicblaze.com/browse/SM?report=com.atlassian.jira.plugin.system.project:changelog-panel" rel="nofollow">Change log</a></span></li>
  </ul>
  <h3><a name="Navigation-Developers"></a>Developers</h3>
  <ul class="alternate" type="square">
    <li><a href="Source" title="Source">Source</a></li>
    <li><a href="Roadmap" title="Roadmap">Roadmap</a></li>
    <li><a href="Ideas" title="Ideas">Ideas</a></li>
    <li><a href="Becoming+a+committer" title="Becoming a committer">Becoming a committer</a></li>
    <li><a href="Release+Guide" title="Release Guide">Release Guide</a></li>
    <li><span class="nobr"><a href="http://ci.codehaus.org/beetlejuice/viewProjectSummary.action?projectName=ServiceMix" rel="nofollow">BeetleJuice</a></span></li>
    <li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/clover/" rel="nofollow">Clover Report</a></span></li>
    <li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/xref/index.html" rel="nofollow">Source XRef</a></span></li>
    <li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/xref-test/index.html" rel="nofollow">Test Source XRef</a></span></li>
    <li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix.xsd.html" rel="nofollow">XSD</a></span></li>
  </ul>
  <h3><a name="Navigation-Toolsweuse"></a>Tools we use</h3><span><span class="nobr"><a href="http://www.yourkit.com" rel="nofollow"><img align="absmiddle" border=0 src="/download/attachments/25208/yjp.gif"></a></span></span></span>

            <h3 class="heading3">Feeds</h3>
            <table border="0" cellspacing="4px">
            <tr>
              <td align="right">
                <a href="http://docs.codehaus.org/spaces/rss.action?key=SM&newPages=false"><img src="http://docs.codehaus.org/images/icons/rss.gif" border="0"></a><br/>
              </td>
              <td align="left">
                <a href="http://docs.codehaus.org/spaces/rss.action?key=SM&newPages=false">Site</a>
              </td>
            </tr>
            <tr>
              <td align="right">
                <a href="http://docs.codehaus.org/spaces/blogrss.action?key=SM"><img src="http://docs.codehaus.org/images/icons/rss.gif" border="0"></a>
              </td>
              <td align="left">
                <a href="http://docs.codehaus.org/spaces/blogrss.action?key=SM">News</a>
              </td>
            </tr>
            </table>
        </td>
        <td id="rightColumn" valign="top">

          <div id="page_title">
            <table width="100%">
              <tr>
                <td>
            jms-binding 
                </td>
                <td align="right">
            
                </td>
              </tr>
            </table>
          </div>


          <div>
  <div id="Content">
    <h3><a name="jms-binding-OverviewoftheServiceMix2.xJMSBindingExample"></a>Overview of the ServiceMix 2.x <em>JMS Binding</em> Example</h3>
    <p>The following procedure describes how to run the <em>JMS Binding</em> example and provides details regarding what it does. For information on the business use case, please refer to: <span class="nobr"><a href="http://www.servicemix.org/Use+Cases" rel="nofollow">Use Case for JMS Binding</a></span>. <br clear="all">
      <br clear="all"> The JMS Binding example illustrates:</p>
    <ul>
      <li>use of declarative programming</li>
      <li>how to perform JMS integration in ServiceMix</li>
      <li>how to use an <span class="nobr"><a href="http://www.activemq.org/Spring+Support" rel="nofollow">ActiveMQ</a></span> message broker</li>
      <li>how to use the <span class="nobr"><a href="http://jencks.org/" rel="nofollow">Jencks</a></span> JCA container</li>
      <li>how to use the <span class="nobr"><a href="http://geronimo.apache.org/" rel="nofollow">Geronimo</a></span> Transaction Manager via the <span class="nobr"><a href="http://jencks.org/Transaction+Manager" rel="nofollow">Jencks factory bean</a></span></li>
    </ul>
    <p>The source code for the <em>JMS Binding</em> example is located in the ServiceMix installation directory under the <tt>examples\jms-binding</tt> directory in the <tt>servicemix.xml</tt> file. It is recommended that you refer to the source code while reading this document. <br clear="all">
      <br clear="all"> This example shows how to connect the JMS bindings to a simple service component. One component listens for a JMS message on topic 'demo.org.servicemix.source' while another publishes processed messages to topic 'demo.org.servicemix.result'. A simple JMS client is provided so that messages can be sent and received to and from the ServiceMix Container.</p>
    <h3><a name="jms-binding-RunningtheJMSBindingExample"></a>Running the <em>JMS Binding</em> Example</h3>
    <p class="paragraph">
      <ol>
        <li>From a command shell, go to the JMS Binding example directory: <div class="code">
            <div class="codeContent"><pre class="code-java">cd [servicemix_install_dir]\examples\jms-binding</pre></div>
          </div>
          <p>where <tt>servicemix_install_dir</tt> is the directory in which ServiceMix was installed.</p>
        </li>
        <li>Then type: <div class="code">
            <div class="codeContent"><pre class="code-java">[servicemix_install_dir]\bin\servicemix servicemix.xml</pre></div>
          </div>
        </li>
        <li>To start sending and receiving of messages from the JMS topics, send JMS an initial message. To do this, compile and run a simple JMS client. The client is built and run from source code using Ant. Execute Ant from the <em>JMS Binding</em> directory: <tt>servicemix_install_dir\examples\jms-binding</tt>. To run the JMS client type: <br clear="all">
          <div class="code">
            <div class="codeContent"><pre class="code-java">ant</pre></div>
          </div>
          <p>
            <br clear="all"> Ant will compile and run the simple JMS client, <em>JMSClient</em>, which performs a JMS based request-response into the ServiceMix container before returning the results to the console. <br clear="all">
            <br clear="all">
          </p>
          <table align="center" border=0 cellpadding=5 cellspacing="8px" class="tipMacro" width="85%">
            <colgroup>
              <col width=24>
              <col>
            </colgroup>
            <tr>
              <td valign="top"><img align="absmiddle" alt="" border=0 height=16 src="/images/icons/emoticons/check.gif" width=16></td>
              <td><b class="strong">Handy Hint</b><br>
                <p>Add <em>$SERVICEMIX_HOME\bin</em> directory to <em>$PATH</em> variable to simplify execution of the example.</p>
              </td>
            </tr>
          </table>
        </li>
      </ol>
    </p>
    <h3><a name="jms-binding-StoppingtheJMSBindingExample"></a>Stopping the <em>JMS Binding</em> Example</h3>
    <p>To terminate the <em>JMS Binding</em> example, type &quot;CTRL-C&quot; in the command shell in which it is running and answer &quot;y&quot; to the &quot;Terminate batch job (y/n)?&quot; question. <br clear="all">
    </p>
    <h3><a name="jms-binding-HowitWorks"></a>How it Works</h3>
    <p>The diagram below illustrates the flow of messages through the <em>JMS Binding</em> components: <br clear="all">
      <br clear="all">
    </p>
    <p class="paragraph">
      <div class="panel" style="border-style: solid; border-color: #ccc; ">
        <div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; "><b>JMS Binding Example Message Flow Diagram</b></div>
        <div class="panelContent">
          <div align="center"><img border=0 src="/download/attachments/29654/jmsflow.jpg"></div>
        </div>
      </div>
    </p>
    <p>
      <br clear="all"> Messages flow through the components as follows:</p>
    <p class="paragraph">
      <ol>
        <li><em>JMSClient</em>, through ActiveMQConnectionFactory, connects to the topic named &quot;demo.org.servicemix.source&quot; and sends a text message.</li>
        <li><em>jencks</em> (the JCA resource adapter) listens on port 61616 for messages.</li>
        <li><em>inputReceiver</em> subscribes to the &quot;demo.org.servicemix.source&quot; topic via <em>jencks</em> and receives the JMS message.</li>
        <li><em>inputReceiver</em> normalizes the JMS message and sends it to <em>outputSender</em> via the Normalized Message Router (NMR).</li>
        <li><em>outputSender</em> marshals the normalized message to a JMS message and uses <em>jmsTemplate</em> to publish the message on the &quot;demo.org.servicemix.result&quot; topic.</li>
        <li><em>jmsTemplate</em> publishes it on the &quot;demo.org.servicemix.result&quot; topic using <em>jmsFactory</em> to get a connection to the result topic.</li>
        <li><em>JMSClient</em>, also a subscriber of topic &quot;demo.org.servicemix.result,&quot; receives the message.</li>
        <li>The response is printed on the console.</li>
      </ol>
    </p>
    <p>Typical output looks like the following: </p>
    <p class="paragraph">
      <div class="code">
        <div class="codeContent"><pre class="code-java">Loading ServiceMix from file: C:\exist\servicemix\servicemix-2.0.1\examples\jms--binding\servicemix.xml
[INFO] XBeanXmlBeanDefinitionReader - Loading XML bean definitions from file [C:\exist\servicemix\servicemix-2.0.1\examples\jms-binding\servicemix.xml]
[INFO] FileSystemXmlApplicationContext - Bean factory <span class="code-keyword">for</span> application context [org.xbean.spring.context.FileSystemXmlApplicationContext;hashCode=22540508]: 
 org.springframework.beans.factory.support.DefaultListableBeanFactory defining beans[jbi,jencks,broker,
transactionContextManager,transactionManager,jmsFactory]; root of BeanFactory hierarchy
[INFO] FileSystemXmlApplicationContext - 6 beans defined in application context [org.xbean.spring.context.FileSystemXmlApplicationContext;hashCode=22540508]
[INFO] CollectionFactory - JDK 1.4+ collections available
[INFO] CollectionFactory - Commons Collections 3.x available
[INFO] FileSystemXmlApplicationContext - Unable to locate MessageSource with name 'messageSource': using <span class="code-keyword">default</span> [org.springframework.context.support.Delegating
MessageSource@a8c488]
[INFO] FileSystemXmlApplicationContext - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': 
using <span class="code-keyword">default</span> [org.springframework.context.event.SimpleApplicationEventMulticaster@76cbf7]
[INFO] DefaultListableBeanFactory - Pre-instantiating singletons in factory [org.springframework.beans.factory.support.DefaultListableBeanFactory defining beans
 [jbi,jencks,broker,transactionContextManager,transactionManager,jmsFactory]; root of BeanFactory hierarchy]
[INFO] SpringBrokerContainerFactory - Loading ActiveMQ broker from configuration: class path resource [activemq.xml]
[INFO] ActiveMQBeanDefinitionReader - Loading XML bean definitions from class path resource [activemq.xml]
[INFO] BrokerContainerImpl - ActiveMQ 3.2 JMS Message Broker (ID:el2tong-1857-1132035585799-1:0) is starting
[INFO] BrokerContainerImpl - For help or more information please see: http:<span class="code-comment">//www.logicblaze.com
</span>[INFO] JDBCPersistenceAdapter - Database driver recognized: [apache_derby_embedded_jdbc_driver]
[INFO] DefaultJDBCAdapter - Could not create JDBC tables; they could already exist. Failure was: 
CREATE TABLE ACTIVEMQ_MSGS(ID INTEGER NOT NULL, CONTAINER VARCHAR(250), MSGID VARCHAR(250), MSG BLOB, PRIMARY KEY ( ID ) ) Message: Table/View
'ACTIVEMQ_MSGS' already exists in Schema 'APP'. SQLState: X0Y32 Vendor code: 20000
[INFO] DefaultJDBCAdapter - Could not create JDBC tables; they could already exist. Failure was:
 CREATE TABLE ACTIVEMQ_TXS(XID VARCHAR(250) NOT NULL, PRIMARY KE
Y ( XID )) Message: Table/View 'ACTIVEMQ_TXS' already exists in Schema 'APP'. SQLState: X0Y32 Vendor code: 20000
[INFO] DefaultJDBCAdapter - Could not create JDBC tables; they could already exist. Failure was: CREATE TABLE ACTIVEMQ_ACKS(SUB VARCHAR(250) NOT NULL, CONTAINER
 VARCHAR(250) NOT NULL, LAST_ACKED_ID INTEGER, SE_ID INTEGER, SE_CLIENT_ID VARCHAR(250), SE_CONSUMER_NAME VARCHAR(250), SE_SELECTOR VARCHAR(250), PRIMARY KEY (
SUB, CONTAINER )) Message: Table/View 'ACTIVEMQ_ACKS' already exists in Schema 'APP'. SQLState: X0Y32 Vendor code: 20000
[INFO] DefaultJDBCAdapter - Could not create JDBC tables; they could already exist. Failure was: ALTER TABLE ACTIVEMQ_MSGS ADD EXPIRATION BIGINT Message: Column
 'EXPIRATION' already exists in Table/View 'APP.ACTIVEMQ_MSGS'. SQLState: X0Y32 Vendor code: 20000
[INFO] DefaultJDBCAdapter - Could not create JDBC tables; they could already exist. Failure was: ALTER TABLE ACTIVEMQ_MSGS ADD SENT_TO_DEADLETTER CHAR(1) 
Message: Column 'SENT_TO_DEADLETTER' already exists in Table/View 'APP.ACTIVEMQ_MSGS'. SQLState: X0Y32 Vendor code: 20000
[INFO] JournalPersistenceAdapter - Opening journal.
[INFO] JournalPersistenceAdapter - Opened journal: Active Journal: using 2 x 20.0 Megs at: ..\<span class="code-keyword">var</span>\journal
[INFO] JournalPersistenceAdapter - Journal Recovery Started.
[INFO] JournalPersistenceAdapter - Journal Recovered: 0 message(s) in transactions recovered.
[INFO] TcpTransportServerChannel - Listening <span class="code-keyword">for</span> connections at: tcp:<span class="code-comment">//el2tong:61616
</span>[INFO] BrokerConnectorImpl - ActiveMQ connector started: TcpTransportServerChannel@tcp:<span class="code-comment">//el2tong:61616
</span>[INFO] BrokerContainerImpl - ActiveMQ JMS Message Broker (ID:el2tong-1857-1132035585799-1:0) has started
[INFO] JCAContainer - Jencks JCA Container (http:<span class="code-comment">//jencks.org/) has started running version: 1.1
</span>[INFO] SpringInitialContextFactory - Loading JNDI context from: class path resource [jndi.xml]
[INFO] XBeanXmlBeanDefinitionReader - Loading XML bean definitions from class path resource [jndi.xml]
[INFO] JBIContainer - Activating component <span class="code-keyword">for</span>: [container=defaultJBI,name=#SubscriptionManager#,id=#SubscriptionManager#]
 with service: <span class="code-keyword">null</span> component: org.servicemix.jbi.nmr.SubscriptionManager@1315415
[INFO] JBIContainer - ServiceMix JBI Container (http:<span class="code-comment">//servicemix.org/) name: defaultJBI running version: 2.0.1
</span>[INFO] JBIContainer - Activating component <span class="code-keyword">for</span>: [container=defaultJBI,name=inputReceiver,id=inputReceiver]
 with service: {http:<span class="code-comment">//servicemix.org/demo/}inputReceiver component: org.servicemix.components.jms.JmsInUsingJCABinding@1786a3c
</span>[INFO] JCAConnector - Activating endpoint <span class="code-keyword">for</span> activationSpec: ActiveMQActivationSpec{acknowledgeMode='Auto-acknowledge', destinationType='javax.jms.Topic', mess
ageSelector='<span class="code-keyword">null</span>', destination='demo.org.servicemix.source', clientId='<span class="code-keyword">null</span>', subscriptionName='<span class="code-keyword">null</span>', subscriptionDurability='NonDurable'} using endpointFacto
ry: org.jencks.SingletonEndpointFactory@d0d12e[transactionManager=org.apache.geronimo.transaction.context.GeronimoTransactionManager@1554233]
[INFO] ComponentContextImpl - Component: inputReceiver activated endpoint: {http:<span class="code-comment">//servicemix.org/demo/}inputReceiver : inputReceiver
</span>[INFO] JBIContainer - Activating component <span class="code-keyword">for</span>: [container=defaultJBI,name=outputSender,id=outputSender] with service:
 {http:<span class="code-comment">//servicemix.org/demo/}outputSender component: org.servicemix.components.jms.JmsSenderComponent@1c6d11a
</span>[INFO] ComponentContextImpl - Component: outputSender activated endpoint: {http:<span class="code-comment">//servicemix.org/demo/}outputSender : outputSender
</span>[INFO] ActiveMQConnection - channel status changed: Channel: TcpTransportChannel: Socket[addr=localhost/127.0.0.1,port=61616,localport=1863] has connected
[INFO] BrokerContainerImpl - Adding <span class="code-keyword">new</span> client: ID:el2tong-1857-1132035585799-11:0 on transport: TcpTransportChannel:
 Socket[addr=/127.0.0.1,port=1863,localport=61616]</pre></div>
      </div>
    </p>
    <h3><a name="jms-binding-Details"></a>Details</h3>
    <p>The following table provides more details about the function of each component and bean in the servicemix.xml file. <br clear="all">
      <br clear="all">
    </p>
    <p class="paragraph">
      <table class="confluenceTable">
        <tbody>
          <tr>
            <th class="confluenceTh">Component or Bean ID</th>
            <th class="confluenceTh">Description</th>
          </tr>
          <tr>
            <td class="confluenceTd"><em>jbi</em></td>
            <td class="confluenceTd"><em>jbi</em> is the &quot;id&quot; of the JBI container and provides the basic infrastructure services for the following components: <em>inputReceiver</em> and <em>outputSender</em>. During initialization, several singletons are instantiated: <em>transactionManager</em>, <em>broker</em>, <em>jencks</em>, <em>jmsFactory</em>, and <em>jbi</em>. After initialization, the components in the <em>jbi</em> container are activated.</td>
          </tr>
          <tr>
            <td class="confluenceTd"><em>inputReceiver</em></td>
            <td class="confluenceTd">This component uses <em>jencks</em> , the JCA container, to listen on port 61616 for a JMS message on the topic called &quot;demo.org.servicemix.source.&quot; <em>inputReceiver</em> subscribes to the demo.org.servicemix.source topic. It takes the message, normalizes it, and routes it to <em>outputSender</em> via the NMR. This component combined with <em>outputSender</em> and supporting beans creates a JMS bridge between two topics.</td>
          </tr>
          <tr>
            <td class="confluenceTd"><em>outputSender</em></td>
            <td class="confluenceTd">This component receives a normalized message from the NMR, marshals it into a JMS message using <em>jmsTemplate (1)</em>, then publishes it on the ActiveMQ (JMS) topic called &quot;demo.org.servicemix.result.&quot;</td>
          </tr>
          <tr>
            <td class="confluenceTd"><em>jencks</em></td>
            <td class="confluenceTd"> The <em>jencks</em> bean defines a JCA container. The JCA container allows you to configure thread pool size, configure a transaction manager, and configure a resource adapter. In this example, the resource adapter is an ActiveMQ adapter, however, any JMS listener could be configured instead. This adapter listens on port 61616 for JMS messages.</td>
          </tr>
          <tr>
            <td class="confluenceTd"><em>broker</em></td>
            <td class="confluenceTd">The <em>broker</em> bean uses the <tt>activemq.xml</tt> file to configure the message broker, which handles the JMS messages for the components that require JMS messaging services.</td>
          </tr>
          <tr>
            <td class="confluenceTd"><em>transactionManager</em></td>
            <td class="confluenceTd">This bean is configured to be the default transaction manager for the <em>jbi</em> container. <em>jencks</em> is configured to use the default transaction manager. This transaction manager provides transactional services between the resource adapter (in this case the ActiveMQ resource adapter provided by the <em>jencks</em> JCA container) and components the <em>jbi</em> container. </td>
          </tr>
          <tr>
            <td class="confluenceTd"><em>jmsFactory</em></td>
            <td class="confluenceTd">This bean listens on port 61616 and provides a pooled ActiveMQ connection.</td>
          </tr>
        </tbody>
      </table>
    </p>
    <p>1. <em>jmsTemplate:</em> JmsTemplate is a Spring component which hides the low level details when sending JMS messages. For additional information see: <span class="nobr"><a href="http://activemq
.codehaus.org/Spring+Support" rel="nofollow" title="Visit page outside Confluence">JmsTemplate</a></span>. jmsTemplate is not a component in the <em>jbi</em> container. It is used by <em>inputSender</em> and <em>outputSender</em>.</p>
    <h3><a name="jms-binding-RelatedDocumentation"></a>Related Documentation</h3>
    <p>For more information on the following topics please see:</p>
    <ul>
      <li><span class="nobr"><a href="http://www.activemq.org/Spring+Support" rel="nofollow">ActiveMQ related components, <em>jmsFactory</em>, <em>jmsTemplate</em>, <em>broker</em></a></span></li>
    </ul>
    <ul>
      <li><a href="Glossary#Glossary-NMR" title="NMR on Glossary">NMR</a></li>
    </ul>
    <ul>
      <li><span class="nobr"><a href="http://jencks.org/" rel="nofollow">JCA Container, <em>jencks</em></a></span></li>
    </ul>
    <p>
      <br clear="all"> For a brief explanation of the XML tags in the <tt>servicemi.xml</tt> file, please see:</p>
    <ul>
      <li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix.xsd.html" rel="nofollow">XSD</a></span></li>
    </ul>
    <p>.</p>
  </div>
</div>

          &nbsp;
        </td>
      </tr>
      <tr>
        <td colspan="3" id="footer">
          <table width="100%"> 
            <tr>
              <td align="left" valign="top">
          
              </td>
              <td align="right" valign="top">
          <a style="color:#999;" href="http://docs.codehaus.org/pages/editpage.action?spaceKey=SM&title=jms-binding">[ edit ]</a>
              </td>
            </tr>
          <table>
        </td>
      </tr>
    </table>
  </body>

</html>


