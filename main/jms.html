
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
JMS
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/main/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="home.html" title="Home">Home</A>&nbsp;&gt;&nbsp;<A href="documentation.html" title="Documentation">Documentation</A>&nbsp;&gt;&nbsp;<A href="components.html" title="Components">Components</A>&nbsp;&gt;&nbsp;<A href="lightweight-components.html" title="Lightweight components">Lightweight components</A>&nbsp;&gt;&nbsp;<A href="" title="JMS">JMS</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="license.html" title="License">License</A></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="../SM30UG/users-guide.html" title="User's Guide">User&apos;s Guide</A></LI>
	<LI><A href="documentation.html" title="Documentation">Documentation</A></LI>
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><SPAN class="nobr"><A href="http://goopen.org/confluence/pages/listpages-dirview.action?key=SM" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
	<LI><A href="resources.html" title="Resources">Resources</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">JMS</div>
-->
            <DIV class="wiki-content"><TABLE cellpadding="5" width="85%" cellspacing="8px" class="warningMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Warning</B><BR>
<P>This component has been deprecated in favor to <A href="servicemix-jms.html" title="servicemix-jms">servicemix&#45;jms</A> component.</P></TD></TR></TABLE>

<P>The JMS components allow you to send and receive JMS messages. The JMS components assume that the NormalizedMessage they are given are ready for marshalling into/out of JMS, so they don&apos;t try to implement a SOAP stack or perform any complex message transformation other than to map NMS to JMS or vice versa.</P>

<P>If you wish to customize the marshalling from NMS to JMS or vice versa you can customize the JmsMarshaler used to perform the mapping.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Performance Note</B><BR>
<P>If you wish to process messages in a high performance setting and want to use connection &amp; thread pooling, transaction &amp; exception &amp; retry handling and want to support parallel processing of inbound messages we recommend you use the <A href="jca.html" title="JCA">JCA</A> support for inbound JMS messages.</P></TD></TR></TABLE>

<H3><A name="JMS-ReceivingJMSmessages"></A>Receiving JMS messages</H3>

<P>The JmsReceiverComponent subscribes to the given destination using Spring&apos;s JmsTemplate and dispatches the message into the JBI container. Here&apos;s an <SPAN class="nobr"><A href="http://svn.apache.org/repos/asf/incubator/servicemix/trunk/servicemix-components/src/test/resources/org/apache/servicemix/components/xslt/example.xml" title="Visit page outside Confluence" rel="nofollow">example<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> of subscribing to a JMS destination (in this case a topic) and forwarding the JBI message onto another JBI component - which in this case is the <EM>foo:transformer</EM> service.</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;sm:activationSpec componentName=<SPAN class="code-quote">&quot;myJmsReceiver&quot;</SPAN> service=<SPAN class="code-quote">&quot;foo:myJmsReceiver&quot;</SPAN> destinationService=<SPAN class="code-quote">&quot;foo:transformer&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;sm:component&gt;</SPAN><SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.jms.JmsReceiverComponent&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;template&quot;</SPAN>&gt;</SPAN>
      <SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.springframework.jms.core.JmsTemplate&quot;</SPAN>&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;connectionFactory&quot;</SPAN>&gt;</SPAN>
          <SPAN class="code-tag">&lt;ref local=<SPAN class="code-quote">&quot;jmsFactory&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;/property&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;defaultDestinationName&quot;</SPAN> value=<SPAN class="code-quote">&quot;test.org.apache.servicemix.components.xslt.source&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;pubSubDomain&quot;</SPAN> value=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
      <SPAN class="code-tag">&lt;/bean&gt;</SPAN>
    <SPAN class="code-tag">&lt;/property&gt;</SPAN>
  <SPAN class="code-tag">&lt;/bean&gt;</SPAN><SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
<SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN></PRE>
</DIV></DIV>
<P>If you wish to use JCA or some other mechanism to subscribe to JMS you can use the JmsInBinding.</P>

<H3><A name="JMS-SendingJMSmessages"></A>Sending JMS messages</H3>

<P>The JmsSenderComponent will send JMS messages from the input message exchange. This component uses Spring&apos;s JmsTemplate to perform the sending. The following <SPAN class="nobr"><A href="http://svn.apache.org/repos/asf/incubator/servicemix/trunk/servicemix-components/src/test/resources/org/apache/servicemix/components/xslt/example.xml" title="Visit page outside Confluence" rel="nofollow">example<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> demonstrates a component which when invoked will send a message to a given JMS topic</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;sm:activationSpec componentName=<SPAN class="code-quote">&quot;myJmsSender&quot;</SPAN> service=<SPAN class="code-quote">&quot;foo:myJmsSender&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;sm:component&gt;</SPAN><SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.jms.JmsSenderComponent&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;template&quot;</SPAN>&gt;</SPAN>
      <SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.springframework.jms.core.JmsTemplate&quot;</SPAN>&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;connectionFactory&quot;</SPAN>&gt;</SPAN>
          <SPAN class="code-tag">&lt;ref local=<SPAN class="code-quote">&quot;jmsFactory&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;/property&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;defaultDestinationName&quot;</SPAN> value=<SPAN class="code-quote">&quot;test.org.apache.servicemix.components.xslt.source&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;pubSubDomain&quot;</SPAN> value=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
      <SPAN class="code-tag">&lt;/bean&gt;</SPAN>
    <SPAN class="code-tag">&lt;/property&gt;</SPAN>
  <SPAN class="code-tag">&lt;/bean&gt;</SPAN><SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
<SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN></PRE>
</DIV></DIV>

<H3><A name="JMS-JMSbridges"></A>JMS bridges</H3>

<P>Its a very common requirement to create a message bridge; routing messages from one messaging system to another. With ServiceMix we can connect any transport with any transport - but for now lets focus on JMS to JMS bridging. Imagine for example you wish to route messages from ActiveMQ to MQSeries, or from WebLogic JMS to ActiveMQ.</P>

<P>The following <SPAN class="nobr"><A href="https://svn.apache.org/repos/asf/incubator/servicemix/trunk/servicemix-components/src/test/resources/org/apache/servicemix/components/xslt/pipeline.xml" title="Visit page outside Confluence" rel="nofollow">example<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> demonstrates how to setup a JMS bridge in ServiceMix</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml">&lt;beans <SPAN class="code-keyword">xmlns:sm</SPAN>=<SPAN class="code-quote">&quot;http://servicemix.apache.org/config/1.0&quot;</SPAN> 
	   <SPAN class="code-keyword">xmlns:foo</SPAN>=<SPAN class="code-quote">&quot;http://servicemix.org/demo/pipeline/&quot;</SPAN>&gt;

  <SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- the JBI container and its components --&gt;</SPAN></SPAN>
  <SPAN class="code-tag">&lt;sm:container id=<SPAN class="code-quote">&quot;jbi&quot;</SPAN> embedded=<SPAN class="code-quote">&quot;true&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;sm:activationSpecs&gt;</SPAN>

      <SPAN class="code-tag">&lt;sm:activationSpec componentName=<SPAN class="code-quote">&quot;myJmsReceiver&quot;</SPAN> service=<SPAN class="code-quote">&quot;foo:myJmsReceiver&quot;</SPAN> destinationService=<SPAN class="code-quote">&quot;foo:transformer&quot;</SPAN>&gt;</SPAN>
        <SPAN class="code-tag">&lt;sm:component&gt;</SPAN><SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.jms.JmsReceiverComponent&quot;</SPAN>&gt;</SPAN>
          <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;template&quot;</SPAN>&gt;</SPAN>
            <SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.springframework.jms.core.JmsTemplate&quot;</SPAN>&gt;</SPAN>
              <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;connectionFactory&quot;</SPAN>&gt;</SPAN>
                <SPAN class="code-tag">&lt;ref local=<SPAN class="code-quote">&quot;jmsFactory&quot;</SPAN>/&gt;</SPAN>
              <SPAN class="code-tag">&lt;/property&gt;</SPAN>
              <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;defaultDestinationName&quot;</SPAN> value=<SPAN class="code-quote">&quot;demo.cheese.source&quot;</SPAN>/&gt;</SPAN>
              <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;pubSubDomain&quot;</SPAN> value=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
            <SPAN class="code-tag">&lt;/bean&gt;</SPAN>
          <SPAN class="code-tag">&lt;/property&gt;</SPAN>
        <SPAN class="code-tag">&lt;/bean&gt;</SPAN><SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
      <SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN>

      <SPAN class="code-tag">&lt;sm:activationSpec componentName=<SPAN class="code-quote">&quot;transformer&quot;</SPAN> service=<SPAN class="code-quote">&quot;foo:transformer&quot;</SPAN> destinationService=<SPAN class="code-quote">&quot;foo:transformedSender&quot;</SPAN>&gt;</SPAN>
        <SPAN class="code-tag">&lt;sm:component&gt;</SPAN><SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.xslt.XsltComponent&quot;</SPAN>&gt;</SPAN>
          <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;xsltResource&quot;</SPAN> value=<SPAN class="code-quote">&quot;classpath:org/apache/servicemix/components/xslt/transform.xsl&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;/bean&gt;</SPAN><SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
      <SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN>

      <SPAN class="code-tag">&lt;sm:activationSpec componentName=<SPAN class="code-quote">&quot;transformedSender&quot;</SPAN> service=<SPAN class="code-quote">&quot;foo:transformedSender&quot;</SPAN>&gt;</SPAN>
        <SPAN class="code-tag">&lt;sm:component&gt;</SPAN><SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.jms.JmsSenderComponent&quot;</SPAN>&gt;</SPAN>
          <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;template&quot;</SPAN>&gt;</SPAN>
            <SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.springframework.jms.core.JmsTemplate&quot;</SPAN>&gt;</SPAN>
              <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;connectionFactory&quot;</SPAN>&gt;</SPAN>
                <SPAN class="code-tag">&lt;ref local=<SPAN class="code-quote">&quot;jmsFactory&quot;</SPAN>/&gt;</SPAN>
              <SPAN class="code-tag">&lt;/property&gt;</SPAN>
              <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;defaultDestinationName&quot;</SPAN> value=<SPAN class="code-quote">&quot;demo.cheese.result&quot;</SPAN>/&gt;</SPAN>
              <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;pubSubDomain&quot;</SPAN> value=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
            <SPAN class="code-tag">&lt;/bean&gt;</SPAN>
          <SPAN class="code-tag">&lt;/property&gt;</SPAN>
        <SPAN class="code-tag">&lt;/bean&gt;</SPAN><SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
      <SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN>

    <SPAN class="code-tag">&lt;/sm:activationSpecs&gt;</SPAN>
  <SPAN class="code-tag">&lt;/sm:container&gt;</SPAN>

  <SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;jmsFactory&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.apache.activemq.pool.PooledConnectionFactory&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;connectionFactory&quot;</SPAN>&gt;</SPAN>
      <SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;</SPAN>&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;brokerURL&quot;</SPAN> value=<SPAN class="code-quote">&quot;vm://localhost?broker.persistent=false&quot;</SPAN>/&gt;</SPAN>
      <SPAN class="code-tag">&lt;/bean&gt;</SPAN>
    <SPAN class="code-tag">&lt;/property&gt;</SPAN>
  <SPAN class="code-tag">&lt;/bean&gt;</SPAN>

<SPAN class="code-tag">&lt;/beans&gt;</SPAN></PRE>
</DIV></DIV>
<P>This example is performing an <A href="xslt.html" title="XSLT">XSLT</A> transform on the messages as well - you can perform arbitrary processing of the messages in the bridge, performing rules processing or content based routing. Obviously you could miss out the transformation step and just route the inbound message on one JMS provider to another JMS provider without any transform step.</P></DIV>
          
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=jstrachan">James Strachan</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=gnodet">Guillaume Nodet</A> on Aug 08, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=1945&originalId=9589">view change</A>)
              
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=1945">edit page</A>)
    </DIV>

  </BODY>

</HTML>