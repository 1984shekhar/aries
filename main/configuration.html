
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
Configuration
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/main/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="home.html" title="Home">Home</A>&nbsp;&gt;&nbsp;<A href="documentation.html" title="Documentation">Documentation</A>&nbsp;&gt;&nbsp;<A href="guides.html" title="Guides">Guides</A>&nbsp;&gt;&nbsp;<A href="" title="Configuration">Configuration</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="license.html" title="License">License</A></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="../SM30UG/users-guide.html" title="User's Guide">User&apos;s Guide</A></LI>
	<LI><A href="documentation.html" title="Documentation">Documentation</A></LI>
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><SPAN class="nobr"><A href="http://goopen.org/confluence/pages/listpages-dirview.action?key=SM" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">Configuration</div>
-->
            <DIV class="wiki-content"><TABLE cellpadding="5" width="85%" cellspacing="8px" class="warningMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>
<P>You should refer to the up to date User&apos;s Guide.<BR>
The new page is available <A href="../SM30UG/6-configuring-servicemix.html" title="6. Configuring ServiceMix">here</A></P></TD></TR></TABLE>

<H2><A name="Configuration-XMLConfiguration"></A>XML Configuration</H2>

<P>ServiceMix uses XML configuration files. From 2.0 of ServiceMix onwards we use the <SPAN class="nobr"><A href="http://geronimo.apache.org/xbean" title="Visit page outside Confluence" rel="nofollow">XBean<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> library to do the XML configuration; which allows you to use regular Spring configuration or our custom XSD based XML configuration.</P>

<P>For a reference guide and to see the XSD see the <A href="xml-reference.html" title="Xml Reference">Xml Reference</A></P>

<H2><A name="Configuration-KeyAttributes"></A>Key Attributes</H2>

<P>ServiceMix has a number of parameters that you can set to change it&apos;s runtime behaviour on either the <SPAN class="nobr"><A href="http://servicemix.goopen.org/maven/servicemix-core/apidocs/org/apache/servicemix/jbi/container/JBIContainer.html" title="Visit page outside Confluence" rel="nofollow">JBIContainer <SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> or the derived <SPAN class="nobr"><A href="http://servicemix.goopen.org/maven/servicemix-core/apidocs/org/apache/servicemix/jbi/container/SpringJBIContainer.html" title="Visit page outside Confluence" rel="nofollow">SpringJBIContainer <SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN>.
<BR clear="all">
These are as follows:</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Key Attributes</B><BR>
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Name </TH>
<TH class="confluenceTh"> type </TH>
<TH class="confluenceTh"> Description </TH>
</TR>
<TR>
<TD class="confluenceTd"> name </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> name of the container - needs to be unique if running in a <B><EM>cluster</EM></B> The default is <B>defaultJBI</B> </TD>
</TR>
<TR>
<TD class="confluenceTd"> rootDir </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the path to the directory structure used by ServiceMix - the default is <B><EM>&lt;current directory&gt;/wdir</EM></B> </TD>
</TR>
<TR>
<TD class="confluenceTd"> flowName </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> one of <B><EM>seda</EM></B>, <B><EM>st</EM></B>, <B><EM>jms</EM></B> or <B><EM>jca</EM></B> &#45; see <A href="nmr-flows.html" title="NMR Flows">NMR Flows</A>. The <B>jms</B> and <B>jca</B> flows can also take an optional jmsURL parameter to explicitly reference an <SPAN class="nobr"><A href="http://www.activemq.org/site/configuring-transports.html" title="Visit page outside Confluence" rel="nofollow">activemq transport<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> e.g. flowName=jms?jmsURL=tcp://localhost:61616 <BR clear="all"> </TD>
</TR>
<TR>
<TD class="confluenceTd"> useMBeanServer </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> if true, ServiceMix will try and find an MBeanServer from the MBeanServerFactory if one is not supplied </TD>
</TR>
<TR>
<TD class="confluenceTd"> createMBeanServer </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> if true, ServiceMix will create it&apos;s own MBeanServer if one is not supplied to the container or found from an MBeanServerFactory </TD>
</TR>
<TR>
<TD class="confluenceTd"> installationDirPath </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the path to the installation directory that ServiceMix can optionally monitor for new component archives </TD>
</TR>
<TR>
<TD class="confluenceTd"> monitorInstallationDirectory </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> if true, ServiceMix will monitor the installation directory for new component archives to install </TD>
</TR>
<TR>
<TD class="confluenceTd"> deploymentDirPath </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the path to the deployment directory that ServiceMix can optionally monitor for new service assembilies </TD>
</TR>
<TR>
<TD class="confluenceTd"> monitorDeploymentDirectory </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> if true, ServiceMix will monitor the deployment directory for new service assembilies to deploy </TD>
</TR>
<TR>
<TD class="confluenceTd"> dumpStats </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> if true, ServiceMix will dump message throughput statistics to file for individual components </TD>
</TR>
<TR>
<TD class="confluenceTd"> statsInterval </TD>
<TD class="confluenceTd"> int </TD>
<TD class="confluenceTd"> interval (in seconds) between collection of statistics for message throughput </TD>
</TR>
<TR>
<TD class="confluenceTd"> rmiPort </TD>
<TD class="confluenceTd"> int </TD>
<TD class="confluenceTd"> the port used for the rmi registry (and thus, the JMX connector), defaults to (1099) </TD>
</TR>
<TR>
</TR>
</TBODY></TABLE></TD></TR></TABLE>
<P><BR clear="all"></P>

<H2><A name="Configuration-RootDirectory"></A>Root Directory</H2>

<P>ServiceMix uses a directory structure on local disk for unpacking archives, storing running state and statistics etc. However, if you are running only POJO based Components, then typically the directory structure will not be needed or created.</P>

<P>Under the root directory, there are specific sub-directories, named after the <B><EM>JBIContainer</EM></B> name. Hence, if you are running multiple instances of ServiceMix on the same machine it is advisable to give each instance a unique name.</P>

<P>If the installation directory is present, and <B><EM>monitorInstallationDirectory</EM></B> is enabled, then the directory will be polled for new archives of Components or Service Assembilies to install. The installation directory can be configured to be in a different location by setting the attribute <B><EM>installationDirPath</EM></B> on the <B><EM>JBIContainer</EM></B>.<BR>
The default directory layout is shown below:</P>
<DIV class="panel" style="border-style: solid; border-color: #ccc; "><DIV class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; "><B>ServiceMix Directory Layout</B></DIV><DIV class="panelContent">
<P><IMG src="http://servicemix.org/smdir.jpg" align="absmiddle" border="0"></P>
</DIV></DIV>

<H2><A name="Configuration-Components"></A>Components</H2>


<H3><A name="Configuration-Workingwithcomponents"></A>Working with components</H3>

<P>Another simple way to get started with ServiceMix is to try out the <A href="spring-support.html" title="Spring support">Spring Support</A>. Then you can use ServiceMix inside your application right way, using Spring to wire the components together.</P>

<P>To interact with JBI components, you should try out the <A href="client-api.html" title="Client API">Client API</A>.</P>

<P>Alternatively you might want to try using our <A href="groovy.html" title="Groovy">Groovy</A> support to script ServiceMix really easily - or use <A href="scripting.html" title="Scripting">Scripting</A> to use any other scripting engine to script JBI messages and services.</P>

<H3><A name="Configuration-Developingcomponents"></A>Developing components</H3>

<P>To developing components you might want to check out our <A href="component-helper-classes.html" title="Component helper classes">Component helper classes</A> to take away some of the plumbing required to write JBI components - plus do take a look at the <A href="pojo-support.html" title="POJO support">POJO Support</A> for how to drop simple POJOs into ServiceMix.</P>

<H3><A name="Configuration-DeployingnewJBIdeploymentunits"></A>Deploying new JBI deployment units</H3>

<P>JBI defines a collection of different JBI deployment units (components, service units etc). ServiceMix supports these and allows hot deployment of these at runtime. You can use the <A href="ant-tasks.html" title="Ant Tasks">Ant Tasks</A> for these along with the <A href="management.html" title="Management">Management</A> features.</P>

<P>Another option is to drop <EM>component archives</EM> into the <B><EM>$SERVICEMIX_HOME/install</EM></B> directory and <EM>service assembilies</EM> into the <B><EM>$SERVICEMIX_HOME/deploy</EM></B> directory for them to be auto-deployed.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>
<P><B>For example configurations - see</B> <B><A href="examples.html" title="Examples">examples</A></B> <B>where the</B> <B><A href="bpel.html" title="BPEL">BPEL</A></B> <B>example uses auto-deployment.</B></P></TD></TR></TABLE></DIV>
          
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=rajdavies">Rob Davies</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=gnodet">Guillaume Nodet</A> on Oct 03, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=1922&originalId=13941">view change</A>)
              
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=1922">edit page</A>)
    </DIV>

  </BODY>

</HTML>