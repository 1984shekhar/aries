
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
Users space
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/main/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="" title="Users space">Users space</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="license.html" title="License">License</A></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="../SM30UG/users-guide.html" title="User's Guide">User&apos;s Guide</A></LI>
	<LI><A href="documentation.html" title="Documentation">Documentation</A></LI>
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><SPAN class="nobr"><A href="http://goopen.org/confluence/pages/listpages-dirview.action?key=SM" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">Users space</div>
-->
            <DIV class="wiki-content"><H2><A name="Usersspace-RoadmapforaperspectiveServicemixdeveloper"></A><B>Roadmap for a perspective Servicemix developer</B></H2>


<H4><A name="Usersspace-THEPOINT%3A"></A>THE POINT:</H4>

<UL>
	<LI>connect the dots between the documentation already existing on the Servicemix website</LI>
	<LI>Give a developer interested in Servicemix a run through on getting the software up and running</LI>
	<LI>Give the developer instructions on compiling/installing the packaged Smix examples</LI>
	<LI>Give the developer information on monitoring/configuring the software via jconsole</LI>
	<LI>Create two working service assemblies (SA&apos;s) which work together, using out of the box Smix components&#33;</LI>
</UL>


<H4><A name="Usersspace-Also..."></A>Also...</H4>

<P>Check out Georg Dembowski&apos;s <SPAN class="nobr"><A href="hello-world-se.html" title="Visit page outside Confluence" rel="nofollow">tutorial<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> in progress on creating a simple service engine (JBI component).</P>

<H4><A name="Usersspace-Conventions%3A"></A>Conventions:</H4>

<P>TERMS:</P>
<OL>
	<LI>&apos;company repository&apos; = a remote Maven 2 repository used within your company to hold dependencies/artifacts.</LI>
	<LI>[Smix_source_folder] = the location of the folder created after uncompressing the downloaded Smix source distribution (from .zip, .tar.gz etc.).</LI>
	<LI>[Servicemix_binary_distribution_home] = installation location of the Smix binary distribution on your machine</LI>
</OL>


<P><EM>Note: I am using</EM> <EM><SPAN class="nobr"><A href="http://people.apache.org/maven-snapshot-repository/org/apache/servicemix/apache-servicemix/3.0-incubating-SNAPSHOT/apache-servicemix-3.0-incubating-20060907.104512-15-src.tar.gz" title="Visit page outside Confluence" rel="nofollow"><EM>apache-servicemix-3.0-incubating-20060907.104512-15-src.tar.gz</EM><SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></EM><EM>for the following tutorial. If you do not use this snapshot release I cannot guarantee the following will work.</EM></P>

<P><EM>Note: I am writing all this from a Apple MacBook, and therefore the tutorital is from a BSD perspective.</EM></P>

<P>BEFORE STARTING:</P>
<UL>
	<LI>You will need Maven 2 installed on your machine&nbsp;</LI>
</UL>


<H4><A name="Usersspace-Gettingthecomponentdependenciesintoyourlocalmachine%2Fcompanyrepository"></A><B>Getting the component dependencies into your local machine/company repository</B></H4>

<P>If you are going to be running any of the examples or doing any development with a current SNAPSHOT/release then you may want to do a few things first. It makes sense to check out the 3.0 (SNAPSHOT if you want the newest) source code so that you can install the Smix component dependencies in your local repository. First go here and download the <SPAN class="nobr"><A href="http://servicemix.org/site/download.html" title="Visit page outside Confluence" rel="nofollow">ServiceMix 3.0<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> sources. Next you will want to build the Servicemix app and it&apos;s included components. Go <SPAN class="nobr"><A href="http://servicemix.org/site/building.html" title="Visit page outside Confluence" rel="nofollow">here<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> for instructions.</P>

<P>Once you have built the 3.0 app, following the instructions linked above, the Smix component modules will be installed locally.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD><B class="strong">Getting the Smix dependencies into your company repository</B><BR>
<P>If you want to deploy those dependencies to a company repository then keep reading. I can only give information on doing this for Maven 2 as I did not try this for Maven 1. First go into the top level project pom.xml with you favorite editor. This will be in the [Smix_source_folder]/src folder. You are going to first edit out the references to Maven 1. Search for &apos;m1&apos;, or in another case I searched for &apos;maven-one&apos;. There was a property and a plug in section I deleted (maybe some other sections also). I think the plug in is the important one to delete/coment out. Next edit the &apos;distributionManagement&apos; section. Put the relevent information for you company repository here. If you are working with a SNAPSHOT release then you will need to put your snapshot repository information in here.</P>

<P>You should now be able to &apos;mvn &#45;Dmaven.test.skip=true deploy&apos; and the dependencies will upload to the remote repository you defined. This is a good thing when people you are working with will need the Smix component dependencies. If others will be working on a Smix project you create it will also come in handy, as they will not have to chase down dependencies. THANKS MAVEN&#33;&#33;&#33; I think there are other benefits too, such as faster fetching since the dependencies are more local (physically).</P></TD></TR></TABLE>

<H4><A name="Usersspace-NextupinstallthecompiledbinaryServicemix..."></A><B>Next up install the compiled binary Servicemix...</B></H4>

<P>You now have Smix built from source, and the Smix components in a Maven 2 repository. The built distribution of Smix will be in [Smix_source_folder]/apache-servicemix/target. There will be a source distribution that is like (exactly like?) the one which you downloaded, and the .zip, .tar.gzip binary distributions. Install the binary distribution following <SPAN class="nobr"><A href="http://servicemix.org/sm30ug/3-installation.html#3.Installation-UnixSourceInstallation" title="Visit page outside Confluence" rel="nofollow">these<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> directions. Note those are for Unix, but you can follow the link and find directions for Windows. Once you have installed the binary Servicemix installation you are ready to do some testing.</P>

<H4><A name="Usersspace-wsdlfirst"></A><B>wsdl-first</B></H4>

<P>The first thing to do now is install the <SPAN class="nobr"><A href="http://servicemix.org/sm30ug/1-quick-start.html#1.Quickstart-Deployasampleapplication" title="Visit page outside Confluence" rel="nofollow">wsdl-first<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> service assembly (SA) which contains a few service units (SU&apos;s) (<SPAN class="nobr"><A href="https://sdlc6a.sun.com/ECom/EComActionServlet;jsessionid=728961EE41294F2FB2547B82D037F02E" title="Visit page outside Confluence" rel="nofollow">See JBI specification document<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN>). The end result is a XFire based SOAP service which is pretty simple. The actual code for the service is in the file [Servicemix_binary_distribution_home]/examples/wsdl-first/wsdl-first-jsr181-su/src/main/java/org/apache/servicemix/samples/wsdl_first/PersonImpl.java. Phew&#33; Take a look at the code, it is pretty simple. It uses an <SPAN class="nobr"><A href="http://java.sun.com/j2se/1.5.0/docs/guide/language/annotations.html" title="Visit page outside Confluence" rel="nofollow">annotation<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> which describes the class as a <SPAN class="nobr"><A href="http://dev2dev.bea.com/webservices/jwsm.html" title="Visit page outside Confluence" rel="nofollow">jsr181<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> web service. One interesting thing to note about this project is the use of an ant task inside the parent pom.xml. This taks uses XFire&apos;s WsGenTask to create Java objects used by the web service, as described in the WSDL file.</P>

<P>So let&apos;s get this up and running in our Smix container. <SPAN class="nobr"><A href="http://servicemix.org/sm30ug/1-quick-start.html#1.Quickstart-Starttheserver" title="Visit page outside Confluence" rel="nofollow">Start<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> Smix, watch the output to make sure things start up correctly. You will need to open up a new console for the next step, since the Smix output is taking up the other. You will be able to watch this output to see what is going on in some of the following steps. Go back to [Servicemix_binary_distribution_home]. You need to copy the components needed by the wsdl-first SA from the /components folder to the /install folder. The ones you should copy are:</P>
<UL>
	<LI>servicemix-http-3.0-incubating-SNAPSHOT-installer.zip</LI>
	<LI>servicemix-shared-3.0-incubating-SNAPSHOT-installer.zip</LI>
	<LI>servicemix-jsr181-3.0-incubating-SNAPSHOT-installer.zip</LI>
</UL>


<P>With each copied component will come messages from Smix in the console output window. Watch these to make sure things properly install. If any problems crop up, try to copy the component again. I have received a zip related exception before. I did the copy a second time and the problem didn&apos;t show itself a second time.</P>

<P>There is an easy way to do the following: copy the file [Servicemix_binary_distribution_home]/examples/wsdl-first/wsdl-first-sa-3.0-incubating-SNAPSHOT.zip into the /install folder. Watch the Smix console window making sure things go well. You can now open a browser and go <SPAN class="nobr"><A href="http://localhost:8192/PersonService/main.wsdl" title="Visit page outside Confluence" rel="nofollow">here<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> to see the WSDL for the SOAP service.</P>

<P>&nbsp;That was the easy way....but you want to learn about developing so let&apos;s do it the &apos;hard&apos; way. First go to the [Servicemix_binary_distribution_home]/examples/wsdl-first folder and type mvn install. This example project is using a <SPAN class="nobr"><A href="http://servicemix.org/site/maven-jbi-plugin.html" title="Visit page outside Confluence" rel="nofollow">Maven 2 plugin<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> for creating specific JBI components. If you look in the module pom.xml files you will see a special packaging type. After the mvn install completes there will be file called wsdl-first-sa-3.0-incubating-SNAPSHOT-installer in the wsdl-first-sa module&apos;s target folder. This is SA for the wsdl-first example project. Now we want to deploy this to our container. The Maven JBI plugin will take care of this for us&#33;&#33;&#33; Note we need to make a small change to the wsdl-first-sa module&apos;s pom.xml. The plugin will normally try to install all the shared libraries needed by the SA when running the Maven goal jbi:projectDeploy. This is sometimes useful. But often it causes problems because another SA in Smix is using the shared lib already. In this case the Maven goal will try to remove and redeploy the shared lib from Smix. This causes a problem and will make the SA deployment fail. So to tell the plugin to not do this make the following change in the pom.xml:</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.servicemix.tooling&lt;/groupId&gt;
            &lt;artifactId&gt;jbi-maven-plugin&lt;/artifactId&gt;
            &lt;extensions&gt;true&lt;/extensions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;

into....

&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.servicemix.tooling&lt;/groupId&gt;
            &lt;artifactId&gt;jbi-maven-plugin&lt;/artifactId&gt;
            &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;configuration&gt;
                &lt;deployDependencies&gt;false&lt;/deployDependencies&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;

That little config change will prevent some headaches later.
</PRE>
</DIV></DIV>
<P>You are ready to rock. Change directory to the wsdl-first-sa module. Type &apos;mvn jbi:projectDeploy&apos;. You can watch the Smix console for information on the deployment.<DIV align="center"><IMG src="users-space.data/wsdl-first-install.jpg" border="0"></DIV><BR>
&nbsp;<BR>
Betting that all went well you should be ready to test out the web service you deployed into Smix. Lucky for you a nice little web app has been packaged with the application. In your web browser open the file [Servicemix_binary_distribution_home]/examples/wsdl-first/client.html. This static .html page contains a javascript which will try to contact the web service on your local machine. To make it work simply click the &apos;send&apos; button. If your browser issues any warning make sure you allow the javascript to do what it needs to do. In Firefox I have to &apos;allow&apos; what it calls an unsafe operation. The results of clicking the &apos;send&apos; button will be a SOAP response posted into the right hand text area.</P>

<H4><A name="Usersspace-Temporaryexcursionintomonitoring"></A><B>Temporary excursion into monitoring</B></H4>

<P>One great benefit to JBI and Smix are the monitoring capabilities. Using the jconsole application packaged with the Java SDK you can tap into your Smix instance. In doing so you can get all sorts of information on things like thread and memory usage, and have the ability to configure the Smix environment dynamically. Lets use jconsole&#33; Open a terminal session and type &apos;nohup jconsole &amp;&apos;. If your machine has the Java SDK&apos;s /bin folder in it&apos;s path then this should launch the jconsole application. If the application has launched then you should be able to close the terminal window now.</P>

<P>You should see a window titled &apos;JConsole: Connect to Agent&apos;. In the &apos;Local&apos; tab&apos;s window you should see an entry. Select this entry and press the &apos;Connect&apos; button. You should now be connected to your local Smix instance. Take some time to play around. Done? Alright now lets do some maintanance to the Smix environment. We are going to shut down the wsdl-first SA, then start it back up.</P>
<UL>
	<LI>Select the tab called &apos;MBeans&apos;.</LI>
	<LI>This gives a tree like structure that you can navigate through.</LI>
	<LI>Open the node labeled &apos;org.apache.servicemix&apos;. Open the &apos;servicemix&apos; node.</LI>
	<LI>Open the node labeled &apos;Endpoint&apos;. You will see all the installed endpoints in your JBI environment here. There should be only one.</LI>
	<LI>You should see a node labeled &apos;ServiceAssembly&apos;, open this node. You now should see one entry for wsdl-first. Click on this entry. The window to your right should now pop up some information about the SA.</LI>
	<LI>In the right window click on the tab labeled &apos;Operations&apos;. You will see four operations: start, stop, shutdown, and getDiscriptior.</LI>
	<LI>Click the shutdown button. You will get a pop up window containing XML that tells you how the operation went. I hope that you see SUCCESS in the task-result element.</LI>
	<LI>With the SA shutdown try to get the <SPAN class="nobr"><A href="http://localhost:8192/PersonService/main.wsdl" title="Visit page outside Confluence" rel="nofollow">WSDL<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> and use the client.html app to contact the web service. Niether will work.</LI>
	<LI>Let us start the SA again, click the start button in the operations window. You again get a pop up with XML.</LI>
</UL>


<UL>
	<LI>Try again to get the WSDL or hit the web service using the client.html app. Both should now work.<BR>
<DIV align="center"><IMG src="users-space.data/jconsole.jpg" border="0"></DIV></LI>
</UL>


<P>So this is brief but should give you a good idea of how easy it can be to manage your Servicemix instance(s).</P>

<H4><A name="Usersspace-Nextupthebridgeexample"></A><B>Next up - the bridge example</B></H4>

<P>coming soon....<DIV align="center"><IMG src="users-space.data/bridge.jpg" border="0"></DIV></P></DIV>
          
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=gnodet">Guillaume Nodet</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=robottaway">Robert Ottaway</A> on Oct 02, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=13814&originalId=13895">view change</A>)
              
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=13814">edit page</A>)
    </DIV>

  </BODY>

</HTML>