
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
servicemix-http
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="home.html" title="Home">Home</A>&nbsp;&gt;&nbsp;<A href="documentation.html" title="Documentation">Documentation</A>&nbsp;&gt;&nbsp;<A href="components.html" title="Components">Components</A>&nbsp;&gt;&nbsp;<A href="jbi-components.html" title="JBI Components">JBI Components</A>&nbsp;&gt;&nbsp;<A href="" title="servicemix-http">servicemix-http</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="license.html" title="License">License</A></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="navigation.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Documentation"></A>Documentation</H3>

<UL class="alternate" type="square">
	<LI><A href="getting-started-guide.html" title="Getting Started Guide">Getting Started</A></LI>
	<LI><A href="features.html" title="Features">Features</A></LI>
	<LI><A href="running.html" title="Running">Running</A></LI>
	<LI><A href="examples.html" title="Examples">Examples</A></LI>
	<LI><A href="servicemix-eip.html" title="servicemix-eip">Enterprise Integration Patterns</A></LI>
	<LI><A href="use-cases-whole.html" title="Use Cases (whole)">Use Cases &#40;whole&#41;</A></LI>
	<LI><A href="configuration.html" title="Configuration">Configuration</A></LI>
	<LI><A href="xml-reference.html" title="Xml Reference">Xml Reference</A></LI>
	<LI><A href="management.html" title="Management">Management</A></LI>
	<LI><A href="architecture.html" title="Architecture">Architecture</A></LI>
	<LI><A href="clustering.html" title="Clustering">Clustering</A></LI>
	<LI><A href="nmr-flows.html" title="NMR Flows">NMR Flows</A></LI>
	<LI><A href="articles.html" title="Articles">Articles</A></LI>
	<LI><A href="features.html" title="Features">Features</A></LI>
	<LI><A href="integration.html" title="Integration">Integration</A></LI>
	<LI><A href="components.html" title="Components">Components</A></LI>
	<LI><A href="tooling-and-utilities.html" title="Tooling and Utilities">Tooling</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">servicemix- http</div>
-->
            <DIV class="wiki-content"><H1><A name="servicemix-http-servicemixhttp"></A>servicemix-http</H1>

<P>ServiceMix ships with a JBI compliant HTTP/SOAP binding component named servicemix-http.</P>

<P>Here are the main features:</P>
<UL>
	<LI>JBI compliant Binding Component</LI>
	<LI>Usable in a lightweight mode in servicemix.xml configuration files</LI>
	<LI>Integrated HTTP server based on <SPAN class="nobr"><A href="http://jetty.mortbay.org/jetty6/" title="Visit page outside Confluence" rel="nofollow">Jetty 6<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI>HTTP Client using <SPAN class="nobr"><A href="http://jakarta.apache.org/commons/httpclient/" title="Visit page outside Confluence" rel="nofollow">Jakarta Commons HTTP Client<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI>Highly performant and scalable using <SPAN class="nobr"><A href="http://www.mortbay.com/MB/log/gregw/?permalink=Jetty6Continuations.html" title="Visit page outside Confluence" rel="nofollow">Jetty 6 continuations<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI>SOAP 1.1 and 1.2 support</LI>
	<LI>MIME attachments</LI>
</UL>


<UL>
	<LI>WS-Addressing support</LI>
	<LI>WSDL based and XBean based deployments</LI>
	<LI>Support for all MEPs as consumers or providers</LI>
	<LI>SSL support</LI>
</UL>


<H2><A name="servicemix-http-Installation"></A>Installation</H2>

<P>Installing the servicemix-http component can be done in several ways:</P>
<UL>
	<LI>drop the installer zip in an hotdeploy directory monitored by ServiceMix</LI>
	<LI>using <A href="ant-tasks.html" title="Ant Tasks">ant tasks</A></LI>
</UL>


<P>Note that when using ant tasks, the component is not started, you will have to start it manually using ant tasks or a console.</P>

<H2><A name="servicemix-http-Configuration"></A>Configuration</H2>

<P>Several parameters can be configured using a JMX console.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Configuration</B><BR>
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Name </TH>
<TH class="confluenceTh"> Type </TH>
<TH class="confluenceTh"> Description </TH>
<TH class="confluenceTh"> Default </TH>
</TR>
<TR>
<TD class="confluenceTd"> streamingEnabled </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> send client side requests using HTTP streaming </TD>
<TD class="confluenceTd"> false </TD>
</TR>
<TR>
<TD class="confluenceTd"> jettyConnectorClassName </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> Jetty connector class name </TD>
<TD class="confluenceTd"> org.mortbay.nio.SelectChannelConnector </TD>
</TR>
<TR>
<TD class="confluenceTd"> jettyThreadPoolSize </TD>
<TD class="confluenceTd"> int </TD>
<TD class="confluenceTd"> thread pool size for server side requests </TD>
<TD class="confluenceTd"> 255 </TD>
</TR>
<TR>
<TD class="confluenceTd"> maxConnectionsPerHost </TD>
<TD class="confluenceTd"> int </TD>
<TD class="confluenceTd"> max number of simultaneous connections to a given host </TD>
<TD class="confluenceTd"> 32 </TD>
</TR>
<TR>
<TD class="confluenceTd"> maxTotalConnections </TD>
<TD class="confluenceTd"> int </TD>
<TD class="confluenceTd"> max number of total simulatenous connections </TD>
<TD class="confluenceTd"> 256 </TD>
</TR>
</TBODY></TABLE></TD></TR></TABLE>
<P>&nbsp;<BR>
&nbsp;</P>

<H2><A name="servicemix-http-XBeandeployment"></A>XBean deployment</H2>

<P>You can deploy Service Units containing a file named xbean.xml for activating consumer and provider endpoints.</P>

<P>This xml file should respect the given syntax, though this is a spring based xml configuration file from where all beans of class <SPAN class="nobr"><A href="http://incubator.apache.org/servicemix/maven/servicemix-http/apidocs/org/apache/servicemix/http/HttpEndpoint.html" title="Visit page outside Confluence" rel="nofollow">HttpEndpoint<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> are retrieved.<BR>
See a full example <SPAN class="nobr"><A href="http://svn.apache.org/repos/asf/incubator/servicemix/trunk/servicemix-http/src/test/resources/xbean/xbean.xml" title="Visit page outside Confluence" rel="nofollow">here<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN>.&nbsp; Note that you have to define the http namespace with</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;beans <SPAN class="code-keyword">xmlns:http</SPAN>=<SPAN class="code-quote">&quot;http://servicemix.apache.org/http/1.0&quot;</SPAN>&gt;</SPAN>
    ...
<SPAN class="code-tag">&lt;/beans&gt;</SPAN></PRE>
</DIV></DIV>
<P>Any numbers of endpoints can be specified in the xbean.xml file.</P>

<H3><A name="servicemix-http-Consumerendpoint"></A>Consumer endpoint</H3>

<P>A consumer endpoint is a server-side http endpoint that will consumer plain HTTP, or HTTP+SOAP requests and send them into the NMR to a given JBI endpoint, which is called the proxied endpoint.</P>

<P>Following is an example of an http consumer endpoint.</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml">&lt;http:endpoint service=<SPAN class="code-quote">&quot;test:MyConsumerService&quot;</SPAN>
               endpoint=<SPAN class="code-quote">&quot;myConsumer&quot;</SPAN>
               role=<SPAN class="code-quote">&quot;consumer&quot;</SPAN> 
               locationURI=<SPAN class="code-quote">&quot;http://localhost:8192/Service/&quot;</SPAN>
               defaultMep=<SPAN class="code-quote">&quot;http://www.w3.org/2004/08/wsdl/in-out&quot;</SPAN> /&gt;</PRE>
</DIV></DIV>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Consumer endpoint attributes</B><BR>
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Name </TH>
<TH class="confluenceTh"> Type </TH>
<TH class="confluenceTh"> Description </TH>
<TH class="confluenceTh"> Required </TH>
</TR>
<TR>
<TD class="confluenceTd"> service </TD>
<TD class="confluenceTd"> QName </TD>
<TD class="confluenceTd"> the service name of the proxied endpoint </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> endpoint </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the endpoint name of the proxied endpoint </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> interfaceName </TD>
<TD class="confluenceTd"> QName </TD>
<TD class="confluenceTd"> the interface name of the proxied endpoint </TD>
<TD class="confluenceTd">&nbsp;</TD>
</TR>
<TR>
<TD class="confluenceTd"> targetService </TD>
<TD class="confluenceTd"> QName </TD>
<TD class="confluenceTd"> the service name of the target endpoint </TD>
<TD class="confluenceTd"> no (defaults to the service attribute) </TD>
</TR>
<TR>
<TD class="confluenceTd"> targetEndpoint </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the endpoint name of the target endpoint </TD>
<TD class="confluenceTd"> no (defaults to the endpoint attribute) </TD>
</TR>
<TR>
<TD class="confluenceTd"> targetInterfaceName </TD>
<TD class="confluenceTd"> QName </TD>
<TD class="confluenceTd"> the interface name of the target endpoint </TD>
<TD class="confluenceTd">&nbsp;</TD>
</TR>
<TR>
<TD class="confluenceTd"> role </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> must be &apos;consumer&apos; </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> locationURI </TD>
<TD class="confluenceTd"> URI </TD>
<TD class="confluenceTd"> the http url where this proxy endpoint will be exposed </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> defaultMEP </TD>
<TD class="confluenceTd"> URI </TD>
<TD class="confluenceTd"> the default MEP uri to use </TD>
<TD class="confluenceTd"> no </TD>
</TR>
<TR>
<TD class="confluenceTd"> defaultOperation </TD>
<TD class="confluenceTd"> QName </TD>
<TD class="confluenceTd"> the default operation name to set on the JBI exchange. if not set, it defaults to the QName of the root xml element </TD>
<TD class="confluenceTd"> no </TD>
</TR>
<TR>
<TD class="confluenceTd"> soap </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> if set, the component will parse the soap requests and send the content into the NMR </TD>
<TD class="confluenceTd"> no (defaults to false) </TD>
</TR>
<TR>
<TD class="confluenceTd"> soapVersion </TD>
<TD class="confluenceTd"> string </TD>
<TD class="confluenceTd"> can be set to &apos;1.1&apos; to force the use of SOAP 1.1 messages </TD>
<TD class="confluenceTd"> no </TD>
</TR>
<TR>
<TD class="confluenceTd"> wsdlResource </TD>
<TD class="confluenceTd"> <SPAN class="nobr"><A href="http://springframework.org/docs/api/org/springframework/core/io/Resource.html" title="Visit page outside Confluence" rel="nofollow">Spring resource<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> </TD>
<TD class="confluenceTd"> if set, the wsdl will be retrieved from the given Spring resource </TD>
<TD class="confluenceTd"> no </TD>
</TR>
</TBODY></TABLE></TD></TR></TABLE>

<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>
<P>The locationUri is usually something like *<SPAN class="nobr"><A href="http://0.0.0.0:8192/jbi/Service*" title="Visit page outside Confluence" rel="nofollow">http://0.0.0.0:8192/jbi/Service*<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
The 0.0.0.0 IP address binds the server socket to all networks that the host<BR>
is in.  If you use <B>localhost</B>, you will only be able to access the URL from<BR>
the same computer.</P></TD></TR></TABLE>

<P>The <B>targetService</B>, <B>targetEndpoint</B> and <B>targetInterfaceName</B> attributes can be used to specify the routing method to use (routing by interface, service or endpoint) and is also useful to allow several proxy endpoints to be created for the same JBI endpoint.  For example to create an HTTP only endpoint and an HTTP+SOAP endpoint, both http endpoints will have the same targetEndpoint and targetService, but they must have different endpoint names.</P>

<H3><A name="servicemix-http-Basicauthenticationconfiguration"></A>Basic authentication configuration</H3>

<P>The consumer endpoint supports basic authentication.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="warningMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>
<P>Basic authentication credentials are passed in plain text across the network.  Please use additional encryption for better security, or use a stronger mechanism other than basic authentication.</P></TD></TR></TABLE>
<P>Basic authentication can be provided using the following syntax:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml">&lt;http:endpoint service=<SPAN class="code-quote">&quot;testBasicAuth:MyConsumerService&quot;</SPAN>
  endpoint=<SPAN class="code-quote">&quot;myConsumer&quot;</SPAN>
  role=<SPAN class="code-quote">&quot;consumer&quot;</SPAN>
  locationURI=<SPAN class="code-quote">&quot;https://localhost:8193/Service/&quot;</SPAN>
  defaultMep=<SPAN class="code-quote">&quot;http://www.w3.org/2004/08/wsdl/in-out&quot;</SPAN>&gt;
  <SPAN class="code-tag">&lt;http:basicAuthentication&gt;</SPAN>
    <SPAN class="code-tag">&lt;http:basicAuthCredentials username=<SPAN class="code-quote">&quot;testuser&quot;</SPAN> password=<SPAN class="code-quote">&quot;testpass&quot;</SPAN> /&gt;</SPAN>
  <SPAN class="code-tag">&lt;/http:basicAuthentication&gt;</SPAN>
<SPAN class="code-tag">&lt;/http:endpoint&gt;</SPAN></PRE>
</DIV></DIV>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">BasicAuthCredentials attributes</B><BR>
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Name </TH>
<TH class="confluenceTh"> Type </TH>
<TH class="confluenceTh"> Description </TH>
<TH class="confluenceTh"> Required </TH>
</TR>
<TR>
<TD class="confluenceTd"> username </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> Authentication username </TD>
<TD class="confluenceTd">&nbsp;</TD>
</TR>
<TR>
<TD class="confluenceTd"> password </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> Authentication password </TD>
<TD class="confluenceTd">&nbsp;</TD>
</TR>
</TBODY></TABLE></TD></TR></TABLE>

<H3><A name="servicemix-http-Providerendpoint"></A>Provider endpoint</H3>

<P>A provider endpoint is a client-side jbi endpoint which can receive requests from the NMR and send them to a given url where the service is provided.</P>

<P>Here is an example of an http provider endpoint:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml">&lt;http:endpoint service=<SPAN class="code-quote">&quot;test:MyProviderService&quot;</SPAN>
               endpoint=<SPAN class="code-quote">&quot;myProvider&quot;</SPAN>
               role=<SPAN class="code-quote">&quot;provider&quot;</SPAN> 
               locationURI=<SPAN class="code-quote">&quot;http://localhost:8192/Service/&quot;</SPAN>
               wsdlResource=<SPAN class="code-quote">&quot;classpath:provider.wsdl&quot;</SPAN> /&gt;</PRE>
</DIV></DIV>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Provider endpoint attributes</B><BR>
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Name </TH>
<TH class="confluenceTh"> Type </TH>
<TH class="confluenceTh"> Description </TH>
<TH class="confluenceTh"> Required </TH>
</TR>
<TR>
<TD class="confluenceTd"> service </TD>
<TD class="confluenceTd"> QName </TD>
<TD class="confluenceTd"> the service name of the exposed jbi endpoint </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> endpoint </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the endpoint name of the exposed jbi endpoint </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> interfaceName </TD>
<TD class="confluenceTd"> QName </TD>
<TD class="confluenceTd"> the interface name of the exposed jbi endpoint </TD>
<TD class="confluenceTd"> no </TD>
</TR>
<TR>
<TD class="confluenceTd"> role </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> must be &apos;provider&apos; </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> locationURI </TD>
<TD class="confluenceTd"> URI </TD>
<TD class="confluenceTd"> the http url of the target service </TD>
<TD class="confluenceTd"> yes </TD>
</TR>
<TR>
<TD class="confluenceTd"> soap </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> if set, the component will parse the soap requests and send the content into the NMR </TD>
<TD class="confluenceTd"> no (defaults to false) </TD>
</TR>
<TR>
<TD class="confluenceTd"> soapAction </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the SOAPAction header to send when invoking the web service </TD>
<TD class="confluenceTd"> no (defaults to &quot;&quot;) </TD>
</TR>
<TR>
<TD class="confluenceTd"> wsdlResource </TD>
<TD class="confluenceTd"> <SPAN class="nobr"><A href="http://springframework.org/docs/api/org/springframework/core/io/Resource.html" title="Visit page outside Confluence" rel="nofollow">Spring resource<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> </TD>
<TD class="confluenceTd"> if set, the wsdl will be retrieved from the given Spring resource </TD>
<TD class="confluenceTd"> no </TD>
</TR>
</TBODY></TABLE></TD></TR></TABLE>

<H3><A name="servicemix-http-SSLconfiguration"></A>SSL configuration</H3>

<P>Both consumer and provider endpoints support SSL.</P>

<P>SSL parameters can be provided using the following syntax:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml">&lt;http:endpoint service=<SPAN class="code-quote">&quot;testSsl:MyConsumerService&quot;</SPAN>
  endpoint=<SPAN class="code-quote">&quot;myConsumer&quot;</SPAN>
  role=<SPAN class="code-quote">&quot;consumer&quot;</SPAN> 
  locationURI=<SPAN class="code-quote">&quot;https://localhost:8193/Service/&quot;</SPAN>
  defaultMep=<SPAN class="code-quote">&quot;http://www.w3.org/2004/08/wsdl/in-out&quot;</SPAN>&gt;
  <SPAN class="code-tag">&lt;http:ssl&gt;</SPAN>
    &lt;http:sslParameters keyStore=<SPAN class="code-quote">&quot;classpath:org/apache/servicemix/http/server.keystore&quot;</SPAN>
    keyStorePassword=<SPAN class="code-quote">&quot;password&quot;</SPAN>/&gt;
  <SPAN class="code-tag">&lt;/http:ssl&gt;</SPAN>
<SPAN class="code-tag">&lt;/http:endpoint&gt;</SPAN>

&lt;http:endpoint service=<SPAN class="code-quote">&quot;testSsl:MyProviderService&quot;</SPAN>
  endpoint=<SPAN class="code-quote">&quot;myProvider&quot;</SPAN>
  role=<SPAN class="code-quote">&quot;provider&quot;</SPAN> 
  locationURI=<SPAN class="code-quote">&quot;https://localhost:8193/Service/&quot;</SPAN>&gt;
  <SPAN class="code-tag">&lt;http:ssl&gt;</SPAN>
    &lt;http:sslParameters keyStore=<SPAN class="code-quote">&quot;classpath:org/apache/servicemix/http/server.keystore&quot;</SPAN>
      keyStorePassword=<SPAN class="code-quote">&quot;password&quot;</SPAN>
      trustStore=<SPAN class="code-quote">&quot;classpath:org/apache/servicemix/http/client.keystore&quot;</SPAN>
      trustStorePassword=<SPAN class="code-quote">&quot;password&quot;</SPAN>/&gt;
  <SPAN class="code-tag">&lt;/http:ssl&gt;</SPAN>
<SPAN class="code-tag">&lt;/http:endpoint&gt;</SPAN></PRE>
</DIV></DIV>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">SSL attributes</B><BR>
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Name </TH>
<TH class="confluenceTh"> Type </TH>
<TH class="confluenceTh"> Description </TH>
<TH class="confluenceTh"> Required </TH>
</TR>
<TR>
<TD class="confluenceTd"> keyPassword </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> key password </TD>
<TD class="confluenceTd"> Defaults to keyStorePassword </TD>
</TR>
<TR>
<TD class="confluenceTd"> keyStore </TD>
<TD class="confluenceTd"> URL </TD>
<TD class="confluenceTd"> url to access the key store </TD>
<TD class="confluenceTd"> Yes (defaults to system property &apos;javax.net.ssl.keyStore&apos;) </TD>
</TR>
<TR>
<TD class="confluenceTd"> keyStorePassword </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the password to access the keystore </TD>
<TD class="confluenceTd"> Yes (defaults to system property &apos;javax.net.ssl.keyStorePassword&apos;) </TD>
</TR>
<TR>
<TD class="confluenceTd"> keyStoreType </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> type of the key store </TD>
<TD class="confluenceTd"> JKS </TD>
</TR>
<TR>
<TD class="confluenceTd"> trustStore </TD>
<TD class="confluenceTd"> URL </TD>
<TD class="confluenceTd"> url to access the trust store </TD>
<TD class="confluenceTd">&nbsp;</TD>
</TR>
<TR>
<TD class="confluenceTd"> trustStorePassword </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> the password to access the trust store </TD>
<TD class="confluenceTd"> If trustStore is specified, defaults to system property &apos;javax.net.ssl.trustStorePassword&apos; </TD>
</TR>
<TR>
<TD class="confluenceTd"> trustStoreType </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> type of the trust store </TD>
<TD class="confluenceTd"> JKS </TD>
</TR>
<TR>
<TD class="confluenceTd"> protocol </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> standard name of the requested secure socket protocol </TD>
<TD class="confluenceTd"> TLS </TD>
</TR>
<TR>
<TD class="confluenceTd"> algorithm </TD>
<TD class="confluenceTd"> String </TD>
<TD class="confluenceTd"> algorithm used for key management </TD>
<TD class="confluenceTd"> SunX509 </TD>
</TR>
<TR>
<TD class="confluenceTd"> wantClientAuth </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> configures the socket for consumer endpoints to accept client side authentication </TD>
<TD class="confluenceTd"> false </TD>
</TR>
<TR>
<TD class="confluenceTd"> needClientAuth </TD>
<TD class="confluenceTd"> boolean </TD>
<TD class="confluenceTd"> configures the socket for consumer endpoints to require client side authentication </TD>
<TD class="confluenceTd"> false </TD>
</TR>
</TBODY></TABLE></TD></TR></TABLE>

<H2><A name="servicemix-http-WSDLDeployment"></A>WSDL Deployment</H2>

<P>In addition to xbean based deployment, the component accepts WSDL-based deployment.<BR>
The service unit may contain any number of WSDL files, each one being parsed and activating the specified endpoints.<BR>
To retrieve the necessary informations from the wsdl, the component can recognize a jbi extension, in addition to the standard http and soap bindings, which specified the role of the component and the default MEP to use for JBI exchanges.</P>

<P>Here is an example of a WSDL:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml">&lt;definitions name=&apos;Consumer&apos; 
             targetNamespace=&apos;http://http.servicemix.org/Test&apos; 
             <SPAN class="code-keyword">xmlns:tns</SPAN>=&apos;http://http.servicemix.org/Test&apos; 
             <SPAN class="code-keyword">xmlns:http</SPAN>=&apos;http://schemas.xmlsoap.org/wsdl/http/&apos; 
             <SPAN class="code-keyword">xmlns:soap</SPAN>=&apos;http://schemas.xmlsoap.org/wsdl/soap/&apos; 
             xmlns=&apos;http://schemas.xmlsoap.org/wsdl/&apos;
             <SPAN class="code-keyword">xmlns:jbi</SPAN>=&apos;http://servicemix.org/wsdl/jbi/&apos;&gt;

    <SPAN class="code-tag">&lt;portType name=&apos;ConsumerInterface&apos;&gt;</SPAN>
    <SPAN class="code-tag">&lt;/portType&gt;</SPAN>

    <SPAN class="code-tag">&lt;binding name=&apos;ConsumerSoapBinding&apos; type=&apos;tns:ConsumerInterface&apos;&gt;</SPAN>
        <SPAN class="code-tag">&lt;soap:binding transport=<SPAN class="code-quote">&quot;http&quot;</SPAN>/&gt;</SPAN>
    <SPAN class="code-tag">&lt;/binding&gt;</SPAN>

    <SPAN class="code-tag">&lt;binding name=&apos;ConsumerHttpBinding&apos; type=&apos;tns:ConsumerInterface&apos;&gt;</SPAN>
        <SPAN class="code-tag">&lt;http:binding verb=<SPAN class="code-quote">&quot;POST&quot;</SPAN>&gt;</SPAN><SPAN class="code-tag">&lt;/http:binding&gt;</SPAN>
    <SPAN class="code-tag">&lt;/binding&gt;</SPAN>

    <SPAN class="code-tag">&lt;service name=&apos;ConsumerInOnly&apos;&gt;</SPAN>
        <SPAN class="code-tag">&lt;port name=&apos;TestEndpoint&apos; binding=&apos;tns:ConsumerSoapBinding&apos;&gt;</SPAN>
            <SPAN class="code-tag">&lt;soap:address location=<SPAN class="code-quote">&quot;http://localhost:8192/InOnly&quot;</SPAN>/&gt;</SPAN>
            <SPAN class="code-tag">&lt;jbi:endpoint role=<SPAN class="code-quote">&quot;consumer&quot;</SPAN> defaultMep=&apos;in-only&apos;/&gt;</SPAN>
        <SPAN class="code-tag">&lt;/port&gt;</SPAN>
    <SPAN class="code-tag">&lt;/service&gt;</SPAN>

    <SPAN class="code-tag">&lt;service name=&apos;ConsumerInOut&apos;&gt;</SPAN>
        <SPAN class="code-tag">&lt;port name=&apos;TestEndpoint&apos; binding=&apos;tns:ConsumerHttpBinding&apos;&gt;</SPAN>
            <SPAN class="code-tag">&lt;http:address location=<SPAN class="code-quote">&quot;http://localhost:8192/InOut&quot;</SPAN>/&gt;</SPAN>
            <SPAN class="code-tag">&lt;jbi:endpoint role=<SPAN class="code-quote">&quot;consumer&quot;</SPAN> defaultMep=&apos;in-out&apos;/&gt;</SPAN>
        <SPAN class="code-tag">&lt;/port&gt;</SPAN>
    <SPAN class="code-tag">&lt;/service&gt;</SPAN>
    
<SPAN class="code-tag">&lt;/definitions&gt;</SPAN></PRE>
</DIV></DIV>

<H2><A name="servicemix-http-Lightweightmode"></A>Lightweight mode</H2>

<P>The servicemix-http component can also be configured in a spring/xbean configuration file, for use in an embedded ServiceMix.<BR>
Here is an example of such a configuration:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;sm:activationSpec&gt;</SPAN>
  <SPAN class="code-tag">&lt;sm:component&gt;</SPAN>
    <SPAN class="code-tag">&lt;http:component&gt;</SPAN>
      <SPAN class="code-tag">&lt;http:endpoints&gt;</SPAN>
        &lt;http:endpoint service=<SPAN class="code-quote">&quot;test:dummy&quot;</SPAN>
                       endpoint=<SPAN class="code-quote">&quot;dummy&quot;</SPAN>
                       role=<SPAN class="code-quote">&quot;consumer&quot;</SPAN> 
                       soap=<SPAN class="code-quote">&quot;true&quot;</SPAN>
                       locationURI=<SPAN class="code-quote">&quot;http://localhost:8192/Service/&quot;</SPAN>
                       defaultMep=<SPAN class="code-quote">&quot;http://www.w3.org/2004/08/wsdl/in-out&quot;</SPAN> /&gt;

        &lt;http:endpoint service=<SPAN class="code-quote">&quot;test:MyProviderService&quot;</SPAN>
                       endpoint=<SPAN class="code-quote">&quot;myProvider&quot;</SPAN>
                       role=<SPAN class="code-quote">&quot;provider&quot;</SPAN> 
                       locationURI=<SPAN class="code-quote">&quot;http://localhost:8192/Service/&quot;</SPAN> /&gt;
      <SPAN class="code-tag">&lt;/http:endpoints&gt;</SPAN>
    <SPAN class="code-tag">&lt;/http:component&gt;</SPAN>
  <SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
<SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN></PRE>
</DIV></DIV>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="warningMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Classpath issues when embedding servicemix-http component</B><BR>
<P>When using the servicemix.xml configuration file to create http endpoints, you must include the servicemix-http-xxx.jar in your classpath.<BR>
You will find this file inside the component installer (./components/servicemix-http-xxx.zip).<BR>
Failing this, an IllegalArgumentException will be thrown with the following message:<BR>
 Component name: xxxxxx is bound to an object which is not a JBI component, it is of type: javax.xml.namespace.QName</P></TD></TR></TABLE>

<H2><A name="servicemix-http-AccessingWSDLs"></A>Accessing WSDLs</H2>

<P>WSDLs for consumer endpoints are retrieved using the following method:</P>
<UL>
	<LI>for a WSDL based deployed endpoint, the WSL will be used as is</LI>
	<LI>for an XBean based deployed endpoint, the WSDL will be retrieved from the wsdlResource attribute</LI>
	<LI>if this information is not provided, the component will try to generate a WSDL by retrieving the target endpoint WSDL and adding the relevant informations to it.</LI>
</UL>


<P>WSDLs are accessible with the standard &apos;?wsdl&apos; query string.</P>

<P>For example, the WSDL for the consumer endpoint seen in the &apos;WSDL Deployment&apos; section will be available at<BR>
<SPAN class="nobr"><A href="http://localhost:8192/InOnly/?wsdl" title="Visit page outside Confluence" rel="nofollow">http://localhost:8192/InOnly/?wsdl<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P>

<P>You can also browse the list of available services on a given port:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-java">http:<SPAN class="code-comment">//localhost:8192/</SPAN></PRE>
</DIV></DIV>

<H2><A name="servicemix-http-WSAddressing"></A>WS-Addressing</H2>

<P>When used on a SOAP consumer endpoint, servicemix-http handles the WS-Adressing Action and To headers.</P>

<H3><A name="servicemix-http-wsa%3AAction"></A>wsa:Action</H3>

<P>The wsa:Action header can be used to specify the target interface name and operation to use for the JBI exchange.</P>

<P>The header uses the following syntax:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-java">[target namespace][delimiter][<SPAN class="code-keyword">interface</SPAN> name][delimiter][operation name]</PRE>
</DIV></DIV>
<P>where:</P>
<UL>
	<LI>[delimiter] is &quot;:&quot; when the [target namespace] is a URN, otherwise &quot;/&quot;.</LI>
	<LI>[target namespace] is the namespace of the interface.</LI>
	<LI>[interface name] is the name of the interface.</LI>
	<LI>[operation name] is the name of the operation.</LI>
</UL>


<P>For example, the following header</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;wsa:Action&gt;</SPAN>http://example.com/stockquote/StockQuoteInterface/GetLastTradePrice<SPAN class="code-tag">&lt;/wsa:Action&gt;</SPAN></PRE>
</DIV></DIV>
<P>will be used to address the JBI exchange with the following properties:</P>
<UL>
	<LI>interface name: {http://example.com/stockquote\}StockQuoteInterface</LI>
	<LI>operation name: {http://example.com/stockquote\}GetLastTradePrice</LI>
</UL>


<H3><A name="servicemix-http-wsa%3ATo"></A>wsa:To</H3>

<P>The wsa:To header specifies the target JBI service name and endpoint name.</P>

<P>The header uses the following syntax:</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-java">[target namespace][delimiter][service name][delimiter][endpoint name]</PRE>
</DIV></DIV>
<P>where:</P>
<UL>
	<LI>[delimiter] is &quot;:&quot; when the [target namespace] is a URN, otherwise &quot;/&quot;.</LI>
	<LI>[target namespace] is the namespace of the interface.</LI>
	<LI>[service name] is the name of the service.</LI>
	<LI>[endpoint name] is the name of the endpoint.</LI>
</UL>


<P>For example, the following header</P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;wsa:To&gt;</SPAN>urn:example:stockquote:StockQuoteService:JBIEndpoint<SPAN class="code-tag">&lt;/wsa:To&gt;</SPAN></PRE>
</DIV></DIV>
<P>will be used to address the JBI exchange with the following properties:</P>
<UL>
	<LI>service name: {urn:example:stockquote}StockQuoteService</LI>
	<LI>endpoint name: JBIEndpoint</LI>
</UL>
</DIV>
          
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=gnt">gnt</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=gnodet">Guillaume Nodet</A> on Aug 31, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=1928&originalId=13358">view change</A>)
              
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=1928">edit page</A>)
    </DIV>

  </BODY>

</HTML>