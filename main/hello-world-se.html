
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
Hello World - SE
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/main/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="" title="Hello World - SE">Hello World - SE</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="license.html" title="License">License</A></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="../SM30UG/users-guide.html" title="User's Guide">User&apos;s Guide</A></LI>
	<LI><A href="documentation.html" title="Documentation">Documentation</A></LI>
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><SPAN class="nobr"><A href="http://goopen.org/confluence/pages/listpages-dirview.action?key=SM" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">Hello World -  SE</div>
-->
            <DIV class="wiki-content"><H1><A name="HelloWorld-SE-Tutorial%3ACreationofa%22HelloWorldSE%22"></A>Tutorial: Creation of a &quot;Hello World - SE&quot;</H1>

<P>This tutorial describes how to create a <EM>very simple</EM> &quot;Hello world&quot; JBI service engine (SE) component, pack it into a Service Unit (SU) which will be packed to a Service Assambly (SA), and finally how to run the SE inside ServiceMix. The SE will answer received messages with &quot;Hello, I received xyz bytes&#33;&quot;, so we literally see that it works. As it has the same structure as real, useful SE, the given hints help to use the presented code as a blueprint to create own SE-SA-SUs. Still, the example is as minimalistic as possible, so readers shall not get lost in too many details but get an idea of the big picture.</P>

<P>This tutorial shows the desired/best practices or &quot;clean&quot; way to create a SE-SA-SU using Maven archetypes, so how the workflow <EM>shall</EM> be - of course, other possibilities exist and may be better suited for certain situations. Furthermore, it will explain the reasons for critical choices and how required information can be retrieved. Where appropriate, additional reading will be suggested. To make it as easy as possible to follow the descriptions, they contain only the <EM>relevant</EM> code snippets, while the <EM>full</EM> code is available in the SVN repository. Please note that the code snippets are fetched directly from the full code in the SVN repository, thus the wiki and the code share always at the same, up to date state.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="tipMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Handy Hints</B><BR>
<P>This tutorial is especially useful for ServiceMix beginners.</P>

<P>The Maven <SPAN class="nobr"><A href="http://maven.apache.org/guides/getting-started/index.html" title="Visit page outside Confluence" rel="nofollow">Getting Started Guide<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> is a recommended and short  reading. It explains most of the Maven related things needed.</P></TD></TR></TABLE>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="warningMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">TODO</B><BR>
<P>INS When to use this JBI Component<BR>
INS Using the component that you created</P>


<P>provide exact position in the SVN&#33;<BR>
/samples/hello-world-SE-SU-SA/<BR>
integrate from SVN source like it is done at Configuration at <SPAN class="nobr"><A href="http://www.servicemix.org/site/visualisation.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/visualisation.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P>


<P>maybe moving the content of overlapping existing docus to this new tut and - where appropriate - delete the old ones (only leaving a redirect).<BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/notes-on-creating-jbi-component-using-maven2.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/notes-on-creating-jbi-component-using-maven2.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/creating-a-standard-jbi-component.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/creating-a-standard-jbi-component.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
 is already fully incorporated, so delete content and point from there to here</P>


<P>ServiceMix can be used as a protocol bridge. The following tutorial will explain how to create a JBI Service Assembly (aka a JBI application) to bridge two different protocols. In this example, we will bridge the HTTP/SOAP with the JMS protocol using an InOnly MEP. We will also put between the two protocols an XSLT transformation.<BR>
We will leverage ServiceMix archetypes and maven plugin (see <A href="maven-jbi-plugin.html" title="Maven JBI plugin">Maven JBI plugin</A>).</P>


<P>provide additional reading<BR>
 <A href="creating-a-protocol-bridge.html" title="Creating a protocol bridge">Creating a protocol bridge</A>.for a &quot;bigger&quot; example</P>


<P>Maybe add testing</P></TD></TR></TABLE>

<H2><A name="HelloWorld-SE-Prerequisites"></A>Prerequisites</H2>

<P>The following is required:</P>
<UL>
	<LI>Around 15 minutes of time</LI>
	<LI>A running copy of ServiceMix 3.0 and Maven 2.0.4 or higher</LI>
	<LI>A connection to the Internet to download dependencies</LI>
	<LI>A text editor to alter XML files</LI>
	<LI>An editor or IDE for Java files</LI>
</UL>


<H2><A name="HelloWorld-SE-OverviewSESUSA"></A>Overview SE-SU-SA</H2>

<P>JBI components are can be tought of as the &quot;smallest applications&quot; you can access in an ESB. They have a very specific purpose, thus a narrow scope and set of functionallity. Components come in two flavours: Service Engine (SE) and Binding Components (BC).</P>

<P>Components are enriched by metadata (<FONT color="#ff0000">which?</FONT>) and the whole is packed into a Service Unit (SU) - basically a JAR archive.</P>

<P>Several SUs are packed into a Service Assambly (SA). An SA is a complete &quot;application&quot; consisting of multiple components (reminder: the &quot;smallest appliactions&quot;) interacting with each other and making up the big &quot;application&quot;.</P>

<P><FONT color="#ff0000">Further reading: JSR 208</FONT></P>

<H2><A name="HelloWorld-SE-CreatingtheSE"></A>Creating the SE</H2>


<H3><A name="HelloWorld-SE-CreatingthestuboftheSE"></A>Creating the stub of the SE</H3>

<P>First, a JBI component has to be created. Here, we use archetypes, just like shown at <A href="creating-a-standard-jbi-component.html" title="Creating a Standard JBI Component">Creating a Standard JBI Component</A> and <A href="notes-on-creating-jbi-component-using-maven2.html" title="Notes on Creating JBI Component using maven2">Notes on Creating JBI Component using maven2</A> and <A href="creating-a-protocol-bridge.html" title="Creating a protocol bridge">Creating a protocol bridge</A>. The Maven 2 archetypes are a kind of pattern, generic model, blueprint or template, or as <SPAN class="nobr"><A href="http://www.m-w.com/cgi-bin/dictionary?book=Dictionary&va=archetype" title="Visit page outside Confluence" rel="nofollow">Merriam-Webster<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> defines &quot;<EM>the original pattern or model of which all things of the same type are representations or copies</EM>&quot;. Using archetypes, Maven creates the basis for components, settings and so on, thus archetypes spare developers repetetive work and avoid errors like typos etc.</P>

<P><EM>Note:</EM> As this text describes how to create a &quot;Hello World&quot; Service Engine and pack it into an SU and SA, the project name is <EM>hello-world-SE-SU-SA</EM> and the single pieces are named analogous. For a custom project, the IDs and names shall be altered such that they describe the purpose or function of the given piece of the SA.</P>

<P>First, we create a directory <EM>hello-world-SE-SU-SA</EM> and open a command line in this folder. Now we execute the following command (it has to be one line but was split to be readable):</P>
<DIV class="panel"><DIV class="panelContent">
<P>mvn archetype:create &#45;DarchetypeGroupId=org.apache.servicemix.tooling &#45;DarchetypeArtifactId=servicemix-service-engine<BR>
&#45;DarchetypeVersion=<FONT color="#993366">3.0-incubating</FONT> &#45;DgroupId=<FONT color="#ff00ff">org.apache.servicemix.samples.helloWorldSE</FONT> &#45;DartifactId=<FONT color="#009900">hello-world-SE</FONT></P>
</DIV></DIV>
<P>The first three parameters identify the maven 2 archetype to use, while the last two parameters define the generated maven 2 project. The version information &quot;<FONT color="#993366">3.0-incubating</FONT>&quot; may have to be changed; a look at any of ServiceMix&apos; <EM>pom.xml</EM> reveals the version to use. Maven uses the group ID (printed in <FONT color="#ff00ff">pink</FONT>) as default Java package (see output below as well), thus invalid characters like minus, percent etc. must be avoided or a custom package name has to be given as parameter. Mavens output following the command looks like this (only relevant information preserved):</P>
<DIV class="panel"><DIV class="panelContent">
<P>[INFO] Scanning for projects...<BR>
[INFO] Searching repository for plugin with prefix: &apos;archetype&apos;.<BR>
[INFO] &#45;--------------------------------------------------------------------------&#45;<BR>
[INFO] Building Maven Default Project<BR>
[INFO]    task-segment: [archetype:create] (aggregator-style)<BR>
[INFO] &#45;--------------------------------------------------------------------------&#45;<BR>
...<BR>
[INFO] <FONT color="#ff00ff">Defaulting package to group ID: org.apache.servicemix.samples.helloWorldSE</FONT><BR>
...<BR>
[INFO] &#42;************<B>&#42;</B>&#42;<B>&#42;</B>&#42; End of debug info from resources from generated POM &#42;<B>&#42;</B>&#42;*****************&#42;<BR>
[INFO] <FONT color="#009900">Archetype created in dir: C:\hello-world-SE-SU-SA\hello-world-SE</FONT><BR>
[INFO] &#45;----------------------------------------------------------------------&#45;<BR>
[INFO] BUILD SUCCESSFUL<BR>
[INFO] &#45;----------------------------------------------------------------------&#45;</P>
</DIV></DIV>
<P>Maven creates a new folder having the same name as the artifact ID provided (printed in <FONT color="#009900">green</FONT> in the command and output). Inside this folder, a file called <EM>pom.xml</EM> is created. This contains the Project Object Model providing Maven with all needed information for building (see <SPAN class="nobr"><A href="http://maven.apache.org/guides/introduction/introduction-to-the-pom.html" title="Visit page outside Confluence" rel="nofollow">Introduction to the POM<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> at the Maven website). Moreover, Java source files and tests were created. The full structure of files created by Maven looks like this (some directories are grouped together for better readability):</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>\hello-world-SE-SU-SA\hello-world-SE\
      pom.xml
      src\main\
            java\
                  org\apache\servicemix\
                        samples\helloWorldSE\
                              MyBootstrap.java
                              MyComponent.java
                              MyDeployer.java
                              MyEndpoint.java
                              MyLifeCycle.java
                              MySpringComponent.java
      test\
            java\
                  org\apache\servicemix\
                        samples\helloWorldSE\
                              MySpringComponentTest.java
            resources\
                  spring.xml
</PRE>
</DIV></DIV>
<P>All the classes have the word &quot;My&quot; prefixed to them due to the template. We can just rename the prefix to whatever we want to, as long as we make sure we change the corresponding resource files (all tests and the <EM>pom.xml</EM>) as well.</P>

<H3><A name="HelloWorld-SE-Compilingthecode"></A>Compiling the code</H3>

<P>From now on, we can build the code by executing</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>cd hello-world-SE

mvn compile
</PRE>
</DIV></DIV>
<P>which shall present us as one of the last lines of output</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>[INFO] BUILD SUCCESSFUL
</PRE>
</DIV></DIV>
<P>In case this success information is not appearing, the output shall give further information on the reasons. Further information can be found in the <A href="mailing-lists.html" title="Mailing Lists">ServiceMix mailing lists archive</A> and the <SPAN class="nobr"><A href="http://maven.apache.org/" title="Visit page outside Confluence" rel="nofollow">Maven website<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN>.</P>

<H3><A name="HelloWorld-SE-Testingthecode"></A>Testing the code</H3>

<P>Doing automated testing of the code is possible as well. As ServiceMix&apos; root POM disables testing, we have to be activate it for the subprojects that shall be tested. To do so, the &lt;build&gt; entity of our <EM>pom.xml</EM> has to be enriched by</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>&lt;pluginManagement&gt;
     &lt;plugins&gt;
          &lt;plugin&gt;
               &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
               &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
               &lt;configuration&gt;
                    &lt;skip&gt;false&lt;/skip&gt;&lt;!-- this overrides ServiceMix&apos; root POM and forces to execute the tests --&gt;
               &lt;/configuration&gt;
          &lt;/plugin&gt;
     &lt;/plugins&gt;
&lt;/pluginManagement&gt;
</PRE>
</DIV></DIV>
<P>where <EM>&lt;skip&gt;false&lt;/skip&gt;</EM> is the relevant line of code. Now, when executing</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn test
</PRE>
</DIV></DIV>
<P>tests will be done and Maven outputs the following (truncated to the relevant information):</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>[INFO] Scanning for projects...
[INFO] ----------------------------------------------------------------------------
[INFO] Building A custom project
[INFO]    task-segment: [test]
[INFO] ----------------------------------------------------------------------------
...
[INFO] [compiler:compile]
...
[INFO] [surefire:test]
[INFO] Setting reports dir: c:\java\tmp\servicemix-helloWorldSE\target/surefire-reports
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
[surefire] Running org.apache.servicemix.samples.helloWorldSE.MySpringComponentTest
...
[surefire] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 1,422 sec
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
...
</PRE>
</DIV></DIV>

<H3><A name="HelloWorld-SE-AddingfunctionalitytothestuboftheSE"></A>Adding functionality to the stub of the SE</H3>

<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">TODO</B><BR>
<P>The default implementation of the component accepts InOut MEPs and return the input content as the out message.</P>

<P>Using an IDE to add meat to the component. You can either use IDEA or Eclipse, I tried it with Eclipse so I guess I am going to stick it for now. &lt;TODO&gt;</P>

<P> This shall already include everything stated at<BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/maven-jbi-plugin.html#MavenJBIplugin-GettingStarted" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/maven-jbi-plugin.html#MavenJBIplugin-GettingStarted<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
and<BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/working-with-components.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/working-with-components.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P></TD></TR></TABLE>

<H2><A name="HelloWorld-SE-CreatingtheSUandSAandincorporatingthemintothemainPOM"></A>Creating the SU and SA and incorporating them into the main POM</H2>


<P>The archetypes for SUs and SAs do not contain much code, but rather help with tasks related to Maven. We will only need to adapt the POMs to our project - just little work, but requiring some guidiance.</P>


<H3><A name="HelloWorld-SE-CreatingtheSUandSA%26nbsp%3B"></A>Creating the SU and SA&nbsp;</H3>

<P>In the directory <EM>hello-world-SE-SU-SA</EM> we execute the following commands (they have to be one line but were split to be readable) for the SU</P>

<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn archetype:create -DarchetypeGroupId=org.apache.servicemix.tooling -DarchetypeArtifactId=servicemix-service-unit&nbsp;
-DarchetypeVersion=3.0-incubating -DgroupId=org.apache.servicemix.samples.helloWorldSE -DartifactId=hello-world-SU&nbsp;
</PRE>
</DIV></DIV>
<P>and the SU</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn archetype:create -DarchetypeGroupId=org.apache.servicemix.tooling -DarchetypeArtifactId=servicemix-service-assembly
-DarchetypeVersion=3.0-incubating -DgroupId=org.apache.servicemix.samples.helloWorldSE -DartifactId=hello-world-SA &nbsp;
</PRE>
</DIV></DIV>

<H3><A name="HelloWorld-SE-IncorporatingtheSUandSAintothemainPOM"></A>Incorporating the SU and SA into the main POM</H3>

<P>Now that we have created the SU and SA structure, we incorporate them into the main <EM>pom.xml</EM>. We create a file called <EM>pom.xml</EM> in the <EM>hello-world-SE-SU-SA</EM> directory and instert the following content:</P>

<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>&lt;project&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;org.apache.servicemix.samples&lt;/groupId&gt;
	&lt;artifactId&gt;helloWorldSE&lt;/artifactId&gt;
	&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;pom&lt;/packaging&gt;
	&lt;modules&gt;
		&lt;module&gt;hello-world-SA&lt;/module&gt;
		&lt;module&gt;hello-world-SU&lt;/module&gt;
	&lt;/modules&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.apache.servicemix.samples.helloWorldSE&lt;/groupId&gt;
			&lt;artifactId&gt;hello-world-SU&lt;/artifactId&gt;
			&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;
</PRE>
</DIV></DIV>
<P>The &lt;modules&gt; entity defines which child projects belong to the main project. The &lt;dependencies&gt; entity causes Maven to include the SU into the SA.</P>

<P><EM>Note:</EM> The content of &lt;version&gt; describes <EM>not</EM> the version of ServiceMix but the project we create, thus we may choose any desired version (e.g. <EM>3.0-final</EM>). Then you have to change it below as well.</P>

<P>Now, we should be able to launch Maven and have the SA generated in the <EM>hello-world-SE-SU-SA/</EM><EM>hello-world-SA/target/</EM> directory by running the following command from the <EM>hello-world-SE-SU-SA</EM> directory:mvn install<BR>
Of course, it won&apos;t work if you deploy it and we now need to fill the holes.</P>

<P>Then, deploy the SA and needed components to a started ServiceMix container:</P>

<P>cd hello-world-SE-SU-SA/hello-world-SA/<BR>
mvn jbi:projectDeploy</P>

<P>Then you can send an request to ...</P>


<H3><A name="HelloWorld-SE-ConfiguringtheServiceAssembly%26nbsp%3B"></A>Configuring the Service Assembly&nbsp;</H3>

<P>manually editing <SPAN class="nobr"><A href="working-with-service-units.html" title="Visit page outside Confluence" rel="nofollow">http://goopen.org/confluence/display/SM/Working+with+Service+Units<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
manually editing <SPAN class="nobr"><A href="http://www.servicemix.org/site/working-with-service-assemblies.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/working-with-service-assemblies.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P>

<P>use the SU archetype like in <SPAN class="nobr"><A href="http://www.servicemix.org/site/creating-a-protocol-bridge.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/creating-a-protocol-bridge.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
use the SA archetype like in <SPAN class="nobr"><A href="http://www.servicemix.org/site/creating-a-protocol-bridge.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/creating-a-protocol-bridge.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
&nbsp;</P></DIV>
          
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=georg_dembowski">Georg Dembowski</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=georg_dembowski">Georg Dembowski</A> on Sep 27, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=13823&originalId=13856">view change</A>)
                      <SPAN id="show" class="inline-control-link"><A href="" onclick="showComment(); return false;">show comment</A></SPAN>
        <SPAN id="hide" class="inline-control-link" style="display:none;"><A href="" onclick="hideComment(); return false;">hide comment</A></SPAN>
          <DIV id="versionComment" class="noteMacro" style="display:none; padding: 5px;">
      <B>Comment:</B>
      INS further explanation/help<BR>
      <SPAN class="smalltext"><A href="http://goopen.org/confluence/pages/viewpreviouspageversions.action?pageId=13823">View page history</A></SPAN>
  </DIV>

    <SCRIPT>
      var show = document.getElementById('show');
      var hide = document.getElementById('hide');
      var versionComment = document.getElementById('versionComment');

      function showComment(){
        show.style.display = 'none';
        hide.style.display = 'inline';
        versionComment.style.display = 'block';
      }

      function hideComment(){
        show.style.display = 'inline';
        hide.style.display = 'none';
        versionComment.style.display = 'none';
      }

    </SCRIPT>
    
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=13823">edit page</A>)
    </DIV>

  </BODY>

</HTML>