
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
Hello World - SE
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/main/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="sandbox.html" title="Sandbox">Sandbox</A>&nbsp;&gt;&nbsp;<A href="" title="Hello World - SE">Hello World - SE</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="license.html" title="License">License</A></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="users-guide.html" title="User's Guide">User&apos;s Guide</A></LI>
	<LI><A href="documentation.html" title="Documentation">Documentation</A></LI>
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><SPAN class="nobr"><A href="http://goopen.org/confluence/pages/listpages-dirview.action?key=SM" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
	<LI><A href="resources.html" title="Resources">Resources</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">Hello World -  SE</div>
-->
            <DIV class="wiki-content"><H1><A name="HelloWorld-SE-Tutorial%3ACreationofa%22HelloWorldSE%22"></A>Tutorial: Creation of a &quot;Hello World - SE&quot;</H1>

<P><B>Note:</B> The content of this document is overlapping with <A href="creating-a-standard-jbi-component.html" title="Creating a Standard JBI Component">Creating a Standard JBI Component</A> and <A href="notes-on-creating-jbi-component-using-maven2.html" title="Notes on Creating JBI Component using maven2">Notes on Creating JBI Component using maven2</A>. Any changes you might want to do for this document might be relevant for them as well. Questions unanswered by this document may be answered by the other documents.</P>

<P><B>Note:</B> The <A href="roadmap-for-a-perspective-servicemix-developer.html" title="Roadmap for a perspective Servicemix developer">Roadmap for a perspective Servicemix developer</A> might be a helpful reading as well, especially for new users. It focuses on using the examples and components shipped with ServiceMix during development in a company.</P>

<P>This tutorial describes how to create a <EM>very simple</EM> &quot;Hello world&quot; JBI service engine (SE) component, pack it into a Service Unit (SU) which will be packed to a Service Assambly (SA), and finally how to run the SE inside ServiceMix. The SE will answer received messages with &quot;Hello, I received xyz bytes&#33;&quot;, so we literally see that it works. As it has the same structure as real, useful SE, the given hints help to use the presented code as a blueprint to create own SE-SA-SUs. Still, the example is as minimalistic as possible, so readers shall not get lost in too many details but get an idea of the big picture.</P>

<P>This tutorial shows the desired/best practices or &quot;clean&quot; way to create a SE-SA-SU using ServiceMix Maven archetypes and the Maven plugin (see <A href="maven-jbi-plugin.html" title="Maven JBI plugin">Maven JBI plugin</A>), so how the workflow <EM>shall</EM> be - of course, other possibilities exist and may be better suited for certain situations. Furthermore, it will explain the reasons for critical choices and how required information can be retrieved. Where appropriate, additional reading is suggested.</P>

<P>To make it as easy as possible to follow the descriptions, they contain only the <EM>relevant</EM> code snippets, while the <EM>full</EM> code is available in the SVN repository. Please note that the code snippets are fetched directly from the full code in the SVN repository, thus the wiki and the code share always at the same, up to date state.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="tipMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Handy Hints</B><BR>
<P>This tutorial is especially useful for ServiceMix beginners.</P>

<P>The Maven <SPAN class="nobr"><A href="http://maven.apache.org/guides/getting-started/index.html" title="Visit page outside Confluence" rel="nofollow">Getting Started Guide<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> is a recommended and short  reading. It explains most of the Maven related things needed.</P></TD></TR></TABLE>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">TODO</B><BR>
<P>INS When to use this JBI Component<BR>
INS Using the component that you created</P>

<P>provide exact position in the SVN&#33;<BR>
/samples/hello-world-SE-SU-SA/<BR>
integrate from SVN source like it is done at Configuration at <SPAN class="nobr"><A href="http://www.servicemix.org/site/visualisation.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/visualisation.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P>

<P>maybe moving the content of overlapping existing docus to this new tut and - where appropriate - delete the old ones (only leaving a redirect).<BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/notes-on-creating-jbi-component-using-maven2.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/notes-on-creating-jbi-component-using-maven2.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> version14<BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/creating-a-standard-jbi-component.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/creating-a-standard-jbi-component.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> version26<BR>
are already fully incorporated in the mentioned versions, so delete content and point from there to here (and delete note at the very top)</P>

<P> This shall already include everything stated at<BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/maven-jbi-plugin.html#MavenJBIplugin-GettingStarted" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/maven-jbi-plugin.html#MavenJBIplugin-GettingStarted<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
and<BR>
<SPAN class="nobr"><A href="http://www.servicemix.org/site/working-with-components.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/working-with-components.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P>

<P>provide additional reading<BR>
<A href="creating-a-protocol-bridge.html" title="Creating a protocol bridge">Creating a protocol bridge</A>.for a &quot;bigger&quot; example<BR>
The <A href="examples.html" title="Examples">examples</A> page lists examples providing more information, showing further possibilities and components.</P></TD></TR></TABLE>

<H2><A name="HelloWorld-SE-Prerequisites"></A>Prerequisites</H2>

<P>The following is required:</P>
<UL>
	<LI>Around 15 minutes of time</LI>
	<LI>A running copy of ServiceMix 3.0 and Maven 2.0.4 or higher</LI>
	<LI>A connection to the Internet to download dependencies</LI>
	<LI>A text editor to alter XML files</LI>
	<LI>An editor or IDE for Java files</LI>
</UL>


<H2><A name="HelloWorld-SE-OverviewSESUSA"></A>Overview SE-SU-SA</H2>

<P>JBI components are can be tought of as the &quot;smallest applications&quot; you can access in an ESB. They have a very specific purpose, thus a narrow scope and set of functionallity. Components come in two flavours: Service Engine (SE) and Binding Components (BC).</P>

<P>Components are enriched by metadata (<FONT color="#ff0000">which?</FONT>) and the whole is packed into a Service Unit (SU) - basically a JAR archive.</P>

<P>Several SUs are packed into a Service Assambly (SA). An SA is a complete &quot;application&quot; consisting of multiple components (reminder: the &quot;smallest appliactions&quot;) interacting with each other and making up the big &quot;application&quot;.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">TODO</B><BR>
<P><FONT color="#ff0000">Further reading: JSR 208. Include references from here to sections/pages in the spec. Maybe add an attachment to this wiki page containing a FDF (annotations for the PDF) so skimming the sepc quickly without missing important information is possible.</FONT></P></TD></TR></TABLE>

<H2><A name="HelloWorld-SE-CreatingthemainPOMandthestubsoftheSE%2CSU%2CSA"></A>Creating the main POM and the stubs of the SE, SU, SA</H2>


<H3><A name="HelloWorld-SE-CreatingthestuboftheSE"></A>Creating the stub of the SE</H3>

<P>First, a JBI component has to be created. Here, we use archetypes, just like shown at <A href="creating-a-standard-jbi-component.html" title="Creating a Standard JBI Component">Creating a Standard JBI Component</A> and <A href="notes-on-creating-jbi-component-using-maven2.html" title="Notes on Creating JBI Component using maven2">Notes on Creating JBI Component using maven2</A> and <A href="creating-a-protocol-bridge.html" title="Creating a protocol bridge">Creating a protocol bridge</A>. The Maven 2 archetypes are a kind of pattern, generic model, blueprint or template, or as <SPAN class="nobr"><A href="http://www.m-w.com/cgi-bin/dictionary?book=Dictionary&va=archetype" title="Visit page outside Confluence" rel="nofollow">Merriam-Webster<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> defines &quot;<EM>the original pattern or model of which all things of the same type are representations or copies</EM>&quot;. Using archetypes, Maven creates the basis for components, settings and so on, thus archetypes spare developers repetetive work and avoid errors like typos etc.</P>

<P><EM>Note:</EM> As this text describes how to create a &quot;Hello World&quot; Service Engine and pack it into an SU and SA, the project name is <EM>hello-world-SE-SU-SA</EM> and the single pieces are named analogous. For a custom project, the IDs and names shall be altered such that they describe the purpose or function of the given piece of the SA.</P>

<P>First, we create a directory <EM>hello-world-SE-SU-SA</EM> and open a command line in this folder. Now we execute the following command (it has to be one line but was split to be readable):</P>
<DIV class="panel"><DIV class="panelContent">
<P>mvn archetype:create &#45;DarchetypeGroupId=org.apache.servicemix.tooling &#45;DarchetypeArtifactId=servicemix-service-engine<BR>
&#45;DarchetypeVersion=<FONT color="#993366">3.0-incubating</FONT> &#45;DgroupId=<FONT color="#ff00ff">org.apache.servicemix.samples.helloWorldSE</FONT> &#45;DartifactId=<FONT color="#009900">hello-world-SE</FONT></P>
</DIV></DIV>
<P>The first three parameters identify the maven 2 archetype to use, while the last two parameters define the generated maven 2 project. The version information &quot;<FONT color="#993366">3.0-incubating</FONT>&quot; may have to be changed; a look at any of ServiceMix&apos; <EM>pom.xml</EM> reveals the version to use. Maven uses the group ID (printed in <FONT color="#ff00ff">pink</FONT>) as default Java package (see output below as well), thus invalid characters like minus, percent etc. must be avoided or a custom package name has to be given as parameter. Mavens output following the command looks like this (only relevant information preserved):</P>
<DIV class="panel"><DIV class="panelContent">
<P>[INFO] Scanning for projects...<BR>
[INFO] Searching repository for plugin with prefix: &apos;archetype&apos;.<BR>
[INFO] &#45;--------------------------------------------------------------------------&#45;<BR>
[INFO] Building Maven Default Project<BR>
[INFO]    task-segment: [archetype:create] (aggregator-style)<BR>
[INFO] &#45;--------------------------------------------------------------------------&#45;<BR>
...<BR>
[INFO] <FONT color="#ff00ff">Defaulting package to group ID: org.apache.servicemix.samples.helloWorldSE</FONT><BR>
...<BR>
[INFO] *<B>&#42;</B>&#42;<B>&#42;</B>&#42;<B>&#42;</B>&#42;<B>&#42;</B>&#42;<B>&#42;</B>&#42; End of debug info from resources from generated POM *<B>&#42;</B>&#42;*****************&#42;<BR>
[INFO] <FONT color="#009900">Archetype created in dir: C:\hello-world-SE-SU-SA\hello-world-SE</FONT><BR>
[INFO] &#45;----------------------------------------------------------------------&#45;<BR>
[INFO] BUILD SUCCESSFUL<BR>
[INFO] &#45;----------------------------------------------------------------------&#45;</P>
</DIV></DIV>
<P>Maven creates a new folder having the same name as the artifact ID provided (printed in <FONT color="#009900">green</FONT> in the command and output). Inside this folder, a file called <EM>pom.xml</EM> is created. This contains the Project Object Model providing Maven with all needed information for building (see <SPAN class="nobr"><A href="http://maven.apache.org/guides/introduction/introduction-to-the-pom.html" title="Visit page outside Confluence" rel="nofollow">Introduction to the POM<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> at the Maven website). Moreover, Java source files and tests were created.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">In case of a BUILD ERROR: Maven plugin version requirement</B><BR>
<P>The&nbsp; maven-archetype-plugin <B>1.0-alpha4</B> or above is required for this tutorial. When an older version is installed, a BUILD ERROR will occur. The version can be checked by having a look at the name of the directories contained in <EM>&#126;/.m2/repository/org/apache/maven/plugins/maven-archetype-plugin</EM> (&#126; is you user directory, on Windows <EM>C:\Documents and Settings\&lt;USERNAME</EM>&gt;). In case only an older version is present, we create a minimal <EM>pom.xml</EM> in the folder where we&apos;re calling the <EM>mvn archetype:create</EM> goal in (so the current folder) and fill the created file with the following content:&nbsp;</P>

<P>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<BR>
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 <SPAN class="nobr"><A href="http://maven.apache.org/maven-v4_0_0.xsd" title="Visit page outside Confluence" rel="nofollow">http://maven.apache.org/maven-v4_0_0.xsd<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN>&quot;&gt;<BR>
&nbsp;&nbsp;&nbsp; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;<BR>
&nbsp;&nbsp;&nbsp; &lt;groupId&gt;mygroup&lt;/groupId&gt;<BR>
&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;myartifact&lt;/artifactId&gt;<BR>
&nbsp;&nbsp;&nbsp; &lt;version&gt;myversion&lt;/version&gt;<BR>
&nbsp;&nbsp;&nbsp; &lt;packaging&gt;pom&lt;/packaging&gt;<BR>
&nbsp;&nbsp;&nbsp; &lt;build&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;pluginManagement&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;plugins&gt;<BR>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;plugin&gt;<BR>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<BR>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;maven-archetype-plugin&lt;/artifactId&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;version&gt;1.0-alpha-4&lt;/version&gt;<BR>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/plugin&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/plugins&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/pluginManagement&gt;<BR>
&nbsp;&nbsp;&nbsp; &lt;/build&gt;<BR>
&lt;/project&gt;</P></TD></TR></TABLE>

<H3><A name="HelloWorld-SE-CreatingthestuboftheSUandSA%26nbsp%3B"></A>Creating the stub of the SU and SA&nbsp;</H3>

<P>The archetypes for SUs and SAs do not contain much code, but rather help with tasks related to Maven. Later, we will only need to adapt the POMs to our project - just little work.</P>

<P>In the directory <EM>hello-world-SE-SU-SA</EM> we execute the following commands (they have to be one line but were split to be readable) for the SU</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn archetype:create -DarchetypeGroupId=org.apache.servicemix.tooling -DarchetypeArtifactId=servicemix-service-unit
-DarchetypeVersion=3.0-incubating -DgroupId=org.apache.servicemix.samples.helloWorldSE -DartifactId=hello-world-SU
</PRE>
</DIV></DIV>
<P>and the SA</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn archetype:create -DarchetypeGroupId=org.apache.servicemix.tooling -DarchetypeArtifactId=servicemix-service-assembly
-DarchetypeVersion=3.0-incubating -DgroupId=org.apache.servicemix.samples.helloWorldSE -DartifactId=hello-world-SA
</PRE>
</DIV></DIV>
<P>By now, the full structure of files is created by Maven and looks like this:</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>C:\hello-world-SE-SU-SA\hello-world-SA
C:\hello-world-SE-SU-SA\hello-world-SA\pom.xml


C:\hello-world-SE-SU-SA\hello-world-SE
C:\hello-world-SE-SU-SA\hello-world-SE\pom.xml

C:\hello-world-SE-SU-SA\hello-world-SE\src\main\java\org\apache\servicemix\samples\helloWorldSE
C:\hello-world-SE-SU-SA\hello-world-SE\src\main\java\org\apache\servicemix\samples\helloWorldSE\MyBootstrap.java
C:\hello-world-SE-SU-SA\hello-world-SE\src\main\java\org\apache\servicemix\samples\helloWorldSE\MyComponent.java
C:\hello-world-SE-SU-SA\hello-world-SE\src\main\java\org\apache\servicemix\samples\helloWorldSE\MyDeployer.java
C:\hello-world-SE-SU-SA\hello-world-SE\src\main\java\org\apache\servicemix\samples\helloWorldSE\MyEndpoint.java
C:\hello-world-SE-SU-SA\hello-world-SE\src\main\java\org\apache\servicemix\samples\helloWorldSE\MyLifeCycle.java
C:\hello-world-SE-SU-SA\hello-world-SE\src\main\java\org\apache\servicemix\samples\helloWorldSE\MySpringComponent.java

C:\hello-world-SE-SU-SA\hello-world-SE\src\test\java\org\apache\servicemix\samples\helloWorldSE
C:\hello-world-SE-SU-SA\hello-world-SE\src\test\java\org\apache\servicemix\samples\helloWorldSE\MySpringComponentTest.java

C:\hello-world-SE-SU-SA\hello-world-SE\src\test\resources
C:\hello-world-SE-SU-SA\hello-world-SE\src\test\resources\spring.xml


C:\hello-world-SE-SU-SA\hello-world-SU
C:\hello-world-SE-SU-SA\hello-world-SU\pom.xml
C:\hello-world-SE-SU-SA\hello-world-SU\src\main\resources
</PRE>
</DIV></DIV>
<P>According to the template rules, all the classes have the word &quot;My&quot; prefixed to them. We can rename the prefix to whatever we want to, as long as we make sure we change the corresponding resource files (all tests and the <EM>pom.xml</EM>) as well.</P>

<H3><A name="HelloWorld-SE-IncorporatingtheSUandSAintothemainPOM"></A>Incorporating the SU and SA into the main POM</H3>

<P>Now that we have created the SU and SA structure, we incorporate them into the main POM. We create a file called <EM>pom.xml</EM> in the <EM>hello-world-SE-SU-SA</EM> directory and instert the following content:</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>&lt;project&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;org.apache.servicemix.samples&lt;/groupId&gt;
	&lt;artifactId&gt;helloWorldSE&lt;/artifactId&gt;
	&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;pom&lt;/packaging&gt;
	&lt;modules&gt;
		&lt;module&gt;hello-world-SA&lt;/module&gt;
		&lt;module&gt;hello-world-SU&lt;/module&gt;
	&lt;/modules&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.apache.servicemix.samples.helloWorldSE&lt;/groupId&gt;
			&lt;artifactId&gt;hello-world-SU&lt;/artifactId&gt;
			&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;
</PRE>
</DIV></DIV>
<P>The &lt;modules&gt; entity defines which child projects belong to the main project. The &lt;dependencies&gt; entity causes Maven to include the SU into the SA.</P>

<P><EM>Note:</EM> The content of &lt;version&gt; describes <EM>not</EM> the version of ServiceMix but of the project we create, thus we may choose any desired version (e.g. <EM>3.0-final</EM>). We just have to use consitently the same version when we reference this project.</P>

<H2><A name="HelloWorld-SE-Mavencommands%26nbsp%3B"></A>Maven commands&nbsp;</H2>

<P>By now, it is already possible to call Maven with the relevant goals.</P>

<H3><A name="HelloWorld-SE-CompilingtheSE%27scode"></A>Compiling the SE&apos;s code</H3>

<P>We can build the code by executing</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn compile
</PRE>
</DIV></DIV>
<P>in the <EM>hello-world-SE-SU-SA/hello-world-SE</EM> directory and Maven shall present as one of the last lines of output</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>[INFO] BUILD SUCCESSFUL
</PRE>
</DIV></DIV>
<P>In case this success information is not appearing, the output shall give information on the reasons. Further information can be found in the <A href="mailing-lists.html" title="Mailing Lists">ServiceMix mailing lists archive</A> and the <SPAN class="nobr"><A href="http://maven.apache.org/" title="Visit page outside Confluence" rel="nofollow">Maven website<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN>.</P>

<H3><A name="HelloWorld-SE-TestingtheSE%27scode"></A>Testing the SE&apos;s code</H3>

<P>Doing automated testing of the code is possible as well. As ServiceMix&apos; root POM disables testing, we have to be activate it for the subprojects that shall be tested. To do so, the &lt;build&gt; entity of our <EM>hello-world-SE-SU-SA/hello-world-SE/</EM><EM>pom.xml</EM> has to be enriched by</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>&lt;pluginManagement&gt;
     &lt;plugins&gt;
          &lt;plugin&gt;
               &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
               &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
               &lt;configuration&gt;
                    &lt;skip&gt;false&lt;/skip&gt;&lt;!-- this overrides ServiceMix&apos; root POM and forces to execute the tests --&gt;
               &lt;/configuration&gt;
          &lt;/plugin&gt;
     &lt;/plugins&gt;
&lt;/pluginManagement&gt;
</PRE>
</DIV></DIV>
<P>where <EM>&lt;skip&gt;false&lt;/skip&gt;</EM> is the relevant line of code. Now, when executing</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn test
</PRE>
</DIV></DIV>
<P>tests will be done and Maven outputs the following (truncated to the relevant information):</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>[INFO] Scanning for projects...
[INFO] ----------------------------------------------------------------------------
[INFO] Building A custom project
[INFO]    task-segment: [test]
[INFO] ----------------------------------------------------------------------------
...
[INFO] [compiler:compile]
...
[INFO] [surefire:test]
[INFO] Setting reports dir: c:\java\tmp\servicemix-helloWorldSE\target/surefire-reports
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
[surefire] Running org.apache.servicemix.samples.helloWorldSE.MySpringComponentTest
...
[surefire] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 1,422 sec
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
...
</PRE>
</DIV></DIV>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">TODO</B><BR>
<P>Maybe add further testing at the end of the tutarial (&quot;how to continue when having the working example&quot;)</P></TD></TR></TABLE>

<H3><A name="HelloWorld-SE-GenerationanddeploymentoftheSA"></A>Generation and deployment of the SA</H3>

<P>By running</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn install
</PRE>
</DIV></DIV>
<P>from the <EM>hello-world-SE-SU-SA</EM> directory, the SA is generated in the <EM>hello-world-SE-SU-SA/</EM><EM>hello-world-SA/target/</EM> directory. Of course, our code does not yet do anything, but we can already deploy the SA and needed components to a running ServiceMix container by switching to the <EM>hello-world-SE-SU-SA/hello-world-SA/</EM> directory and calling</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>mvn jbi:projectDeploy
</PRE>
</DIV></DIV>
<P>Essentially, the plugin will walk the dependencies starting in the current project, then deploy each of the dependencies in reverse order. So it copies contents of the <EM>hello-world-SA-1.0-SNAPSHOT.zip</EM> and orther sources to ServiceMix subdirectories. For further information see <A href="maven-jbi-plugin.html" title="Maven JBI plugin">Maven JBI plugin</A>. When the deployment is complete, ServiceMix will output this confirmation:</P>
<DIV class="preformatted"><DIV class="preformattedContent">
<PRE>INFO  - ServiceAssemblyLifeCycle       - Starting service assembly: hello-world-SA
</PRE>
</DIV></DIV>
<P><EM>Note:</EM> The command <EM>mvn install</EM> executed in the <EM>hello-world-SE</EM> directory creates a JAR and also a component installer. For installation, <EM>mvn jbi:installComponent</EM> has to be executed.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Deploying Dependencies</B><BR>
<P>When working with the <EM>jbi:projectDeploy</EM> one may want to disable dependency deployment. When deploying to a server which has other components sharing these dependencies, they can cause problems while trying to undeploy and redeploy them. To stop the jbi-maven-plugin undeploying and redeploying dependencies, the configuration files (usually in the SA&apos;s or the component&apos;s <EM>pom.xml</EM>) have to be extended by a new entity called deployDependencies with a value of false. This has to be placed in the configuration section for the jbi-maven-plugin. The final structure looks like this (reduced to the bare minimum, the inserted entity is <B>bold</B>):</P>

<P>&lt;build&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;plugins&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;plugin&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;jbi-maven-plugin&lt;/artifactId&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;configuration&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>&lt;deployDependencies&gt;false&lt;/deployDependencies&gt;</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/configuration&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/plugin&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/plugins&gt;<BR>
&lt;/build&gt;</P>

<P>See also <SPAN class="nobr"><A href="https://issues.apache.org/activemq/browse/SM-605?page=all" title="Visit page outside Confluence" rel="nofollow">https://issues.apache.org/activemq/browse/SM-605?page=all<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> for command line options.</P></TD></TR></TABLE>

<H2><A name="HelloWorld-SE-Addingfunctionality"></A>Adding functionality</H2>

<P>The structure is done, so the functionality have to be added. Using an IDE like IDEA or<BR>
Eclipse this is easier; here, the workflow with Eclipse is described.</P>
<TABLE cellpadding="5" width="85%" cellspacing="8px" class="noteMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">TODO</B><BR>
<P>The default implementation of the component accepts InOut MEPs (ADD<BR>
LINK TO FURTHER READING CONCERNING MEPs) and return the input content<BR>
as the out message. This is already nearly what we want.</P>

<P> OUTLINE for further work:</P>
<UL>
	<LI>Get Messages</LI>
	<LI>read Messages</LI>
	<LI>count the bytes<BR>
Maybe easiest by XSLT endpoint (can be used to apply an XSLT stylesheet to the incoming exchange and will return the transformed result as the output message.) see [ servicemix-saxon&#124;servicemix-saxon]</LI>
	<LI>send a message back</LI>
	<LI>Configure SA so that the example receives messages<BR>
create &amp; populate<BR>
C:\hello-world-SE-SU-SA\hello-world-SU\src\main\resources\servicemix.xml</LI>
	<LI>as MyDeployer extends AbstractXBeanDeployer create xbean.xml for SU</LI>
	<LI>make something send messages (eg quartz timer, HTTP POST,...) and dump the answer (eg TraceComponent, FireWriter, EIP,...)</LI>
	<LI>add a chapter what user may do now / &quot;how to continue when having the working example&quot;</LI>
</UL>


<P>Classpath for SU to include manually&nbsp; till v3.1, see <SPAN class="nobr"><A href="http://mail-archives.apache.org/mod_mbox/geronimo-servicemix-users/200610.mbox/%3Cb23ecedc0610042315k30c03d67y240be0bb97358784@mail.gmail.com%3E" title="Visit page outside Confluence" rel="nofollow">mail<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P>


<P> manually editing <SPAN class="nobr"><A href="working-with-service-units.html" title="Visit page outside Confluence" rel="nofollow">http://goopen.org/confluence/display/SM/Working+with+Service+Units<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
manually editing <SPAN class="nobr"><A href="http://www.servicemix.org/site/working-with-service-assemblies.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/working-with-service-assemblies.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
use the SU archetype like in <SPAN class="nobr"><A href="http://www.servicemix.org/site/creating-a-protocol-bridge.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/creating-a-protocol-bridge.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN><BR>
use the SA archetype like in <SPAN class="nobr"><A href="http://www.servicemix.org/site/creating-a-protocol-bridge.html" title="Visit page outside Confluence" rel="nofollow">http://www.servicemix.org/site/creating-a-protocol-bridge.html<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></P></TD></TR></TABLE></DIV>
          
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=georg_dembowski">Georg Dembowski</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=ericmick%2540gmail.com">Eric Mickelson</A> on Oct 14, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=13823&originalId=14114">view change</A>)
              
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=13823">edit page</A>)
    </DIV>

  </BODY>

</HTML>