
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
JBoss Deployer
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="home.html" title="Home">Home</A>&nbsp;&gt;&nbsp;<A href="documentation.html" title="Documentation">Documentation</A>&nbsp;&gt;&nbsp;<A href="integration.html" title="Integration">Integration</A>&nbsp;&gt;&nbsp;<A href="" title="JBoss Deployer">JBoss Deployer</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><SPAN class="nobr"><A href="http://goopen.org/confluence/pages/createpage.action?spaceKey=SM&title=License&linkCreation=true&fromPageId=2021" title="Create Page: License" class="createlink">License<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/plus.gif" height="7" width="7" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="navigation.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Documentation"></A>Documentation</H3>

<UL class="alternate" type="square">
	<LI><A href="getting-started.html" title="Getting Started">Getting Started</A></LI>
	<LI><A href="features.html" title="Features">Features</A></LI>
	<LI><A href="running.html" title="Running">Running</A></LI>
	<LI><A href="examples.html" title="Examples">Examples</A></LI>
	<LI><A href="servicemix-eip.html" title="servicemix-eip">Enterprise Integration Patterns</A></LI>
	<LI><A href="use-cases-whole.html" title="Use Cases (whole)">Use Cases &#40;whole&#41;</A></LI>
	<LI><A href="configuration.html" title="Configuration">Configuration</A></LI>
	<LI><A href="xml-reference.html" title="Xml Reference">Xml Reference</A></LI>
	<LI><A href="management.html" title="Management">Management</A></LI>
	<LI><A href="architecture.html" title="Architecture">Architecture</A></LI>
	<LI><A href="clustering.html" title="Clustering">Clustering</A></LI>
	<LI><A href="nmr-flows.html" title="NMR Flows">NMR Flows</A></LI>
	<LI><A href="articles.html" title="Articles">Articles</A></LI>
	<LI><A href="features.html" title="Features">Features</A></LI>
	<LI><A href="integration.html" title="Integration">Integration</A></LI>
	<LI><A href="components.html" title="Components">Components</A></LI>
	<LI><A href="tooling-and-utilities.html" title="Tooling and Utilities">Tooling</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">JBoss Deployer</div>
-->
            <DIV class="wiki-content">
<H3><A name="JBossDeployer-DeployingJBIJarstoJBoss"></A>Deploying JBI Jars to JBoss</H3>

<P>This document discusses how to deploy ServiceMix to the JBoss application server.</P>

<P>The <SPAN class="nobr"><A href="http://www.jboss.org/" title="Visit page outside Confluence" rel="nofollow">JBoss<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> deployer has been enhanced to allow JBI components and service-assemblies to be installed and deployed directly into the JBoss 4.0 deploy directory. From the deploy directory, JBoss picks them up and and passes them to a ServiceMix JBI container running inside of the JBoss application server.  After deployment, JBI MBeans can be seen in a JMX console and  J2EE resources can be accessed as you would with a standard JBoss deployable component.</P>

<P>The JBoss JMX Console Showing the ServiceMix Deployment:</P>

<P><IMG src="http://www.servicemix.org/jboss-screenshot.png" align="absmiddle" border="0"></P>

<H3><A name="JBossDeployer-InstallingtheJBossDeployer"></A>Installing the JBoss Deployer</H3>

<P>Due to licensing reasons, the JBoss deployer is available at Codehaus.<BR>
You can build it using the following commands.</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-java">svn co http:<SPAN class="code-comment">//svn.codehaus.org/servicemix/trunk/jboss-deployer
</SPAN>cd jboss-deployer
mvn install</PRE>
</DIV></DIV>

<P>You will then find a jboss-deployer-3.0-incubating-SNAPSHOT.sar in the target directory,  simply take this and drop it in your JBoss deploy directory (currently only tested on JBos 4.0.3), and away you go&#33;&#33;&#33; Want to see it in action?  You should be able to drop the JBI RI Transformation Engine example straight into the deploy directory and watch it pick up.  Suddenly you have JBI enabled your JBoss Server&#33;</P>

<H3><A name="JBossDeployer-DeployingstandardJBIartifacts"></A>Deploying standard JBI artifacts</H3>

<P>You can deploy standard JBI components and Service Assemblies on your JBI-enabled JBoss, by simply copying these artifacts to the deploy directory in JBoss.  They will all use the same JBI container and will be able to communicate together.<BR>
Note that if you use XBean configuration files (see below), each file dropped will create a new JBI container.<BR>
To work around that, you can change your servicemix.xml file and deploy it as a Service Unit on the <A href="servicemix-lwcontainer.html" title="servicemix-lwcontainer">lightweight container</A>.</P>

<H3><A name="JBossDeployer-DeployingServiceMixXBeanConfigurations"></A>Deploying ServiceMix XBean Configurations</H3>

<P>Most of the examples that ship with ServiceMix are not delivered in the JBI component/service assembly form but as servicemix.xml configurations that utilize the <EM>XBean</EM> infrastructure in ServiceMix.  This approach lets you quickly get a JBI architecture up and running and while not directly in-line with the JSR-208 specification it is a powerful approach.<TABLE cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://goopen.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B class="strong">Useful Information</B><BR><BR>
Note that if you are planning on using the components that ship with ServiceMix there libraries are not included in the ServiceMix JBoss deployer,  therefore you will need to copy your $SERVICEMIX_HOME/lib and $SERVICEMIX_HOME/lib/optional directories to your application server&apos;s library path (ie. $JBOSS_HOME/server/default/lib).</TD></TR></TABLE><BR>
&nbsp;</P>

<P>Since it is this approach that most people start with we added the ability to deploy this Spring JBI configurations onto JBoss.&nbsp;  In order to do this, deploy the jboss-deployer-2.0.sar deployer that you see below . Next, take a servicemix.xml configuration file and rename it so that it ends in &#45;sm.xml (ie. filebind-sm.xml).&nbsp; Place the configuration file in the JBoss deploy directory.&nbsp;&nbsp;  Before you do that, you will need to make some basic modifications to the configuration file to get it running, namely you will need to make sure that the <EM>createMBeanServer</EM> property is <EM>false</EM>.&nbsp; Below is the file binding example configured to run under JBoss.</P>

<P><B>Example filebinding-sm.xml for ServiceMix 3.0</B></P>
<DIV class="code"><DIV class="codeContent">
<PRE class="code-xml"><SPAN class="code-tag">&lt;?xml version=<SPAN class="code-quote">&quot;1.0&quot;</SPAN> encoding=<SPAN class="code-quote">&quot;UTF-8&quot;</SPAN>?&gt;</SPAN>
&lt;beans <SPAN class="code-keyword">xmlns:sm</SPAN>=<SPAN class="code-quote">&quot;http://servicemix.apache.org/config/1.0&quot;</SPAN>
       <SPAN class="code-keyword">xmlns:foo</SPAN>=<SPAN class="code-quote">&quot;http://servicemix.org/demo/&quot;</SPAN>&gt;

	<SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- the JBI container --&gt;</SPAN></SPAN>
	&lt;sm:container id=<SPAN class="code-quote">&quot;jbi&quot;</SPAN> 
                useMBeanServer=<SPAN class="code-quote">&quot;false&quot;</SPAN>
   	            createMBeanServer=<SPAN class="code-quote">&quot;false&quot;</SPAN> 
                dumpStats=<SPAN class="code-quote">&quot;true&quot;</SPAN> 
                statsInterval=<SPAN class="code-quote">&quot;10&quot;</SPAN>&gt;

		<SPAN class="code-tag">&lt;sm:activationSpecs&gt;</SPAN>

			<SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- Write files to the outbox directory --&gt;</SPAN></SPAN>
			&lt;sm:activationSpec componentName=<SPAN class="code-quote">&quot;fileSender&quot;</SPAN>
				                service=<SPAN class="code-quote">&quot;foo:fileSender&quot;</SPAN>&gt;
				<SPAN class="code-tag">&lt;sm:component&gt;</SPAN>
					<SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.file.FileWriter&quot;</SPAN>&gt;</SPAN>
						<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;directory&quot;</SPAN> value=<SPAN class="code-quote">&quot;outbox&quot;</SPAN> /&gt;</SPAN>
						<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;marshaler&quot;</SPAN>&gt;</SPAN>
							<SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.util.DefaultFileMarshaler&quot;</SPAN>&gt;</SPAN>
								<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;fileName&quot;</SPAN>&gt;</SPAN>
									<SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.expression.JaxenStringXPathExpression&quot;</SPAN>&gt;</SPAN>
										<SPAN class="code-tag">&lt;constructor-arg value=<SPAN class="code-quote">&quot;concat(&apos;sample_&apos;, /sample/@id, &apos;.xml&apos;)&quot;</SPAN> /&gt;</SPAN>
									<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
								<SPAN class="code-tag">&lt;/property&gt;</SPAN>
							<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
						<SPAN class="code-tag">&lt;/property&gt;</SPAN>
					<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
				<SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
			<SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN>

			<SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- Look for files in the inbox directory --&gt;</SPAN></SPAN>
			&lt;sm:activationSpec componentName=<SPAN class="code-quote">&quot;filePoller&quot;</SPAN>
				                 destinationService=<SPAN class="code-quote">&quot;foo:fileSender&quot;</SPAN> 
                         service=<SPAN class="code-quote">&quot;foo:filePoller&quot;</SPAN>&gt;
				<SPAN class="code-tag">&lt;sm:component&gt;</SPAN>
					<SPAN class="code-tag">&lt;bean class=<SPAN class="code-quote">&quot;org.apache.servicemix.components.file.FilePoller&quot;</SPAN>&gt;</SPAN>
						<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;workManager&quot;</SPAN> ref=<SPAN class="code-quote">&quot;workManager&quot;</SPAN> /&gt;</SPAN>
						<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;file&quot;</SPAN> value=<SPAN class="code-quote">&quot;inbox&quot;</SPAN> /&gt;</SPAN>
						<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;period&quot;</SPAN> value=<SPAN class="code-quote">&quot;1000&quot;</SPAN> /&gt;</SPAN>
					<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
				<SPAN class="code-tag">&lt;/sm:component&gt;</SPAN>
			<SPAN class="code-tag">&lt;/sm:activationSpec&gt;</SPAN>
		<SPAN class="code-tag">&lt;/sm:activationSpecs&gt;</SPAN>
	<SPAN class="code-tag">&lt;/sm:container&gt;</SPAN>

	<SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- the work manager (thread pool) for this container --&gt;</SPAN></SPAN>
	<SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;workManager&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.jencks.factory.WorkManagerFactoryBean&quot;</SPAN>&gt;</SPAN>
		<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;threadPoolSize&quot;</SPAN> value=<SPAN class="code-quote">&quot;30&quot;</SPAN> /&gt;</SPAN>
	<SPAN class="code-tag">&lt;/bean&gt;</SPAN>

<SPAN class="code-tag">&lt;/beans&gt;</SPAN></PRE>
</DIV></DIV>
<P>&nbsp;</P></DIV>
          
        <!--
          <div class="tabletitle">
            Children
            <span class="smalltext" id="show" style="display: inline;">
              <a href="javascript:showChildren()">Show Children</a></span>
            <span class="smalltext" id="hide" style="display: none;">
              <a href="javascript:hideChildren()">Hide Children</a></span>
          </div>
          <div class="greybox" id="children" style="display: none;">
                                      <a href="http://goopen.org/confluence/display/SM/JBoss+Deployer+for+2.0" title="JBoss Deployer for 2.0">JBoss Deployer for 2.0</a>
              <span class="smalltext">(ServiceMix)</span>
              <br>
                      </div>
-->
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=pdodds%2540unity-systems.com">pdodds@unity-systems.com</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=gnodet">Guillaume Nodet</A> on Jul 25, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=1932&originalId=9225">view change</A>)
              
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=1932">edit page</A>)
    </DIV>

  </BODY>

</HTML>