
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
<!--
    Pier's plugin always overwrites the stylesheet so lets explicitly use another one
    <link type="text/css" rel="stylesheet" href="autoexport:///SM/resources/space.css">
-->
    <LINK type="text/css" rel="stylesheet" href="resources/site.css">
    <SCRIPT src="resources/space.js" type="text/javascript"></SCRIPT>
    <TITLE>
POJO Container
    </TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()">

    <!-- Banner -->
    <DIV id="site-banner">

      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" class="topbardiv" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/servicemix/main/images/logo.jpg">
          </TD>
          <TD align="right" nowrap="">
            <IMG border="0" src="http://incubator.apache.org/images/apache-incubator-logo.png">
          </TD>
        </TR> 
      </TABLE>

    </DIV>

    <!-- Bread crumbs and Quick Links -->
    <DIV id="site-navbar">
      <TABLE border="0" cellpadding="0" cellspacing="0" width="100%">
        <TR>
          <TD align="left" valign="middle" nowrap="">
            <DIV id="site-breadcrumbs">
<A href="home.html" title="ServiceMix">ServiceMix</A>&nbsp;&gt;&nbsp;<A href="home.html" title="Home">Home</A>&nbsp;&gt;&nbsp;<A href="developers.html" title="Developers">Developers</A>&nbsp;&gt;&nbsp;<A href="ideas.html" title="Ideas">Ideas</A>&nbsp;&gt;&nbsp;<A href="" title="POJO Container">POJO Container</A>
            </DIV>
          </TD>
          <TD align="right" valign="middle" nowrap="">
            <DIV id="site-quicklinks">
<P><A href="download.html" title="Download">Download</A> &#124; <A href="documentation.html" title="Documentation">Documentation</A> &#124; <A href="javadocs.html" title="JavaDocs">JavaDocs</A> &#124; <A href="source.html" title="Source">Source</A> &#124; <SPAN class="nobr"><A href="home.html" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> &#124; <A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A> &#124; <A href="support.html" title="Support">Support</A></P>
            </DIV>
          </TD>
        </TR> 
      </TABLE>
    </DIV>

<!-- Integrate google search later.
          <form name="search" action="http://www.google.com/search" method="get">
            <input type="hidden" name="ie" value="UTF- 8" />
            <input type="hidden" name="oe" value="UTF- 8" />
            <input type="hidden" name="domains" value="" />
            <input type="hidden" name="sitesearch" value="" />
            <input type="text" name="q" maxlength="255" value="" />        
            <input type="submit" name="btnG" value="Google Search" />
          </form>
-->

      <DIV id="site-content">
        <TABLE>
        <TR>
        <TD valign="top">
          <DIV id="site-navigation">
<H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="home.html" title="Home">Home</A></LI>
	<LI><SPAN class="nobr"><A href="http://www.apache.org/" title="Visit page outside Confluence" rel="nofollow">ASF<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="license.html" title="License">License</A></LI>
	<LI><A href="faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="download.html" title="Download">Download</A></LI>
	<LI><A href="sitemap.html" title="SiteMap">SiteMap</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="users-guide.html" title="User's Guide">User&apos;s Guide</A></LI>
	<LI><A href="documentation.html" title="Documentation">Documentation</A></LI>
	<LI><A href="support.html" title="Support">Support</A></LI>
	<LI><A href="discussion-forums.html" title="Discussion Forums">Discussion Forums</A></LI>
	<LI><A href="mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><SPAN class="nobr"><A href="http://issues.apache.org/activemq/browse/SM" title="Visit page outside Confluence" rel="nofollow">Issues<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="contributing.html" title="Contributing">Contributing</A></LI>
	<LI><SPAN class="nobr"><A href="http://goopen.org/confluence/pages/listpages-dirview.action?key=SM" title="Visit page outside Confluence" rel="nofollow">Wiki<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN></LI>
	<LI><A href="team.html" title="Team">Team</A></LI>
	<LI><A href="users.html" title="Users">Users</A></LI>
</UL>


<H3><A name="Navigation-Developers"></A>Developers</H3>

<UL class="alternate" type="square">
	<LI><A href="source.html" title="Source">Source</A></LI>
	<LI><A href="building.html" title="Building">Building</A></LI>
	<LI><A href="ideas.html" title="Ideas">Ideas</A></LI>
	<LI><A href="becoming-a-committer.html" title="Becoming a committer">Becoming a committer</A></LI>
	<LI><A href="release-guide.html" title="Release Guide">Release Guide</A></LI>
	<LI><A href="related-projects.html" title="Related Projects">Related Projects</A></LI>
	<LI><A href="tools.html" title="Tools">Tools</A></LI>
	<LI><A href="resources.html" title="Resources">Resources</A></LI>
</UL>

          </DIV>
        </TD>
        <TD valign="top">
          <DIV id="site-page">

<!--          
            <div class="pagetitle">POJO Container</div>
-->
            <DIV class="wiki-content"><H2><A name="POJOContainer-UseCase"></A>Use Case</H2>

<P>Think Lingo + support for JMS/JBI so it can be easilly deployed in any Spring app such as in Tomcat.</P>

<P>You are either a developer using spring (which is most people these days) or you are developing a web app. You need to work with some external service - or provide a service.</P>

<P>So the idea is - you use POJOs. The only issue now is</P>

<OL>
	<LI>which annotations do you use</LI>
	<LI>do you want to completely hide the middleware, or let bits to show through (e.g. bits of JMS / JBI APIs)</LI>
	<LI>how to integrate with pooling stuff</LI>
</OL>


<P>There now follows the various flavours of this approach</P>

<H3><A name="POJOContainer-Status"></A>Status</H3>

<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Type</TH>
<TH class="confluenceTh">Status</TH>
</TR>
<TR>
<TD class="confluenceTd">plain POJO</TD>
<TD class="confluenceTd">Complete. See Spring</TD>
</TR>
<TR>
<TD class="confluenceTd">EJB3</TD>
<TD class="confluenceTd">Pitchfork or JBoss or maybe OpenEjb one day</TD>
</TR>
<TR>
<TD class="confluenceTd">JMS</TD>
<TD class="confluenceTd">Lingo does some of this - no JMS DI yet</TD>
</TR>
<TR>
<TD class="confluenceTd">JSR 181</TD>
<TD class="confluenceTd">XFire, ServiceMix, SpringWS kinda maybe one day?</TD>
</TR>
<TR>
<TD class="confluenceTd">JBI</TD>
<TD class="confluenceTd">Nothing yet</TD>
</TR>
<TR>
<TD class="confluenceTd">REST</TD>
<TD class="confluenceTd"><A href="rest-pojos.html" title="REST POJOs">REST POJOs</A></TD>
</TR>
</TBODY></TABLE>

<H2><A name="POJOContainer-FlavoursofPOJO"></A>Flavours of POJO</H2>

<P>There&apos;s lots of flavours - pure POJO, EJB3, JSR 181, SCA, Seam/Web Beans etc.</P>

<P>Here&apos;s a few examples</P>

<H3><A name="POJOContainer-PurePOJOnoannotations"></A>Pure POJO - no annotations</H3>

<P>This is a classic pure Spring Remoting option</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">public</SPAN> class Cheese {
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething(<SPAN class="code-object">int</SPAN> x) {.... }
}</PRE>
</DIV></DIV>


<H3><A name="POJOContainer-EJB3annotationsforlifecycle"></A>EJB 3 annotations for lifecycle</H3>

<P>Its basically <SPAN class="nobr"><A href="http://geronimo.apache.org/xbean/annotation-based-dependency-injection.html" title="Visit page outside Confluence" rel="nofollow">AnDI<SUP><IMG class="rendericon" src="http://goopen.org/confluence/images/icons/linkext7.gif" height="0" width="0" align="absmiddle" alt="" border="0"></SUP></A></SPAN> where @PostConstruct and @PreDestroy is used for lifecycles and @Resource used to indicate mandatory injection points.</P>

<H3><A name="POJOContainer-JMSannotations"></A>JMS annotations</H3>

<P>Allow services.methods to be bound to destinations</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">public</SPAN> class Cheese {
  @Queue(name=&quot;foo.bar&apos;, persistent=<SPAN class="code-keyword">true</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething(<SPAN class="code-object">int</SPAN> x) {.... }
}</PRE>
</DIV></DIV>

<P>Allow forJMS injection along with pooling/transaction stuff</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">public</SPAN> class Cheese {
   @Resource Destination orderQueue;
   @Resource  Session session;
   @Resource MessageProducer producer;

  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething(<SPAN class="code-object">int</SPAN> x) {
     <SPAN class="code-comment">// lets send a message
</SPAN>     Message message = session.createTextMessage(<SPAN class="code-quote">&quot;Hey &quot;</SPAN> + x);
     producer.send(message);
  }
}</PRE>
</DIV></DIV>

<H3><A name="POJOContainer-JSR181%2FJAXWS"></A>JSR 181/JAX-WS</H3>

<P>Adds web services specific stuff to help map stuff to WSDL So typical JSR 181 / JAX WS stuff</P>

<DIV class="code"><DIV class="codeContent">
<PRE class="code-java">@WebService(name = <SPAN class="code-quote">&quot;Foo&quot;</SPAN>, targetNamespace = <SPAN class="code-quote">&quot;http:<SPAN class="code-comment">//acme.com&quot;</SPAN>)
</SPAN><SPAN class="code-keyword">public</SPAN> <SPAN class="code-keyword">interface</SPAN> BFServiceV2 {

    @WebMethod(action = <SPAN class="code-quote">&quot;login&quot;</SPAN>)
  <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">String</SPAN> doSomething(<SPAN class="code-object">int</SPAN> x) {.... }
}</PRE>
</DIV></DIV>



<H3><A name="POJOContainer-JBIAnnotations"></A>JBI Annotations</H3>

<P>Could reuse JSR 181 annotations where they make sense then add JBI specific injection (like JMS ones)</P>


<DIV class="code"><DIV class="codeContent">
<PRE class="code-java"><SPAN class="code-keyword">public</SPAN> class Cheese {

  <SPAN class="code-comment">// a few different ways we could map JBI exchanges to POJOs
</SPAN>
  <SPAN class="code-keyword">public</SPAN> void doSomething(InOut exchange) {
     Message in = exchange.getInMessage();
     Message out = exchange.createMessage();
     ...
	 exchange.setOutMessage(out);
     exchange.done();     
  }

  <SPAN class="code-comment">// in only
</SPAN>  <SPAN class="code-keyword">public</SPAN> void process(Message in) { ... }
  <SPAN class="code-keyword">public</SPAN> void process(MessageExchange exchange, Message in) { ... }
 
  <SPAN class="code-comment">// in out
</SPAN>  <SPAN class="code-keyword">public</SPAN> void process(Message in, Message out) { ... }
  <SPAN class="code-keyword">public</SPAN> void process(MessageExchange exchange, Message in, Message out) { ... }
}</PRE>
</DIV></DIV>

<H2><A name="POJOContainer-DeploymentModel"></A>Deployment Model</H2>

<P>The development model outline previously is obviously of paramount importance to the application deleveloper.  The other half which is very important too is the deployment model.  We want to target the web application developers just like spring has.  This means that our solution needs to be able to run in any web application container.  It also means that it needs to able to be packaged in .war.</P>

<P>Further more, I think we need to ride the spring wave and allow all deployment configuration to be done using the web application&apos;s spring configuration file.  The hard part here will be how do we make servicemix configuration and wiring of components so simple and easy that folks do not get put off by the added complexity?  For example, folks like using AXIS because they could create .jws files and they would be exposed as web services without much more effort.  We need to aim for that level of simplicity.  It seems that most of the deployment/wiring information is being included as part of the annotation on the POJO&apos;s, so servicemix deployment model would need to use this automagically wire together BCs with the SEs.</P>

<P>Optionally, I think the container should support being configured with a hot deployment directory that would accept standard JBI deployment artifacts.</P>



</DIV>
          
                  </DIV>
        </TD>
      </TR>
      </TABLE>     
      </DIV>
    </DIV>
    <DIV id="site-footer">
          Added by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=jstrachan">James Strachan</A>,
    last edited by     <A href="http://goopen.org/confluence/users/viewuserprofile.action?username=jstrachan">James Strachan</A> on Sep 25, 2006
                  &nbsp;(<A href="http://goopen.org/confluence/pages/diffpages.action?pageId=13797&originalId=13800">view change</A>)
              
      (<A href="http://goopen.org/confluence/pages/editpage.action?pageId=13797">edit page</A>)
    </DIV>

  </BODY>

</HTML>