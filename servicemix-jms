<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head profile="http://www.w3.org/2000/08/w3c-synd/#">
    <link rel="stylesheet" href="site.css" type="text/css"/>
    <title>ServiceMix - servicemix-jms</title>
</head>

<body>

  <table id="ulayout">
    <tr id="ulayout_top">
      <td colspan="2" valign="bottom">
        <table width="100%">
          <tr id="utop">
            <td id="utop_left">
              <a href="http://incubator.apache.org"><img src="http://incubator.apache.org/images/apache-incubator-logo.png" style="border: none;"/></a>
            </td>
            <td id="utop_right" style="text-align: right; vertical-align: middle;padding-right:10px;">
              <a href="http://incubator.apache.org/servicemix"><img src="images/logo.gif" alt="ServiceMix" class="spaceLogo" border="0"/></a>
            </td>
          </tr>
          <tr>
            <td colspan="2" id="uadvertising_top">
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <table id="utop_nav">
          <tr>
            <td align="left" valign="middle">
              <div id="ubreadcrumbs">
                <p>
                  <a href="">Home</a>
                                     		                  </p>
              </div>
            </td>
            <td align="right" valign="middle">
              <div id="uquicklinks">
                                  <p><a href="Download" title="Download">Download</a> | <span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix-core/apidocs/">JavaDocs</a></span> <span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix-components/apidocs/">Components</a></span> | <a href="Source" title="Source">Source</a> | <span class="nobr"><a href="http://docs.codehaus.org/pages/listpages.action?key=SM">Wiki</a></span> |<span class="nobr"><a href="irc://irc.codehaus.org/servicemix">IRC</a></span> | <span class="nobr"><a href="http://servlet.uwyn.com/drone/log/hausbot/servicemix">IRC Log</a></span> | <a href="Mailing+Lists" title="Mailing Lists">Mailing Lists</a> | <a href="Discussion+Forums" title="Discussion Forums">Discussion Forums</a> | <span class="nobr"><a href="http://issues.apache.org/activemq/browse/SM">Support</a></span></p>
                              </div>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td colspan="2"></td>
    </tr>
    <tr id="ulayout_middle">
      <td id="uleft">
        <div class="content">
                      <div class="section_3"><h3><a name="Navigation-Overview"></a>Overview</h3>

<ul class="alternate" type="square">
	<li><a href="Home" title="Home">Home</a></li>
	<li><a href="Introduction+to+ESB" title="Introduction to ESB">Introduction to ESB</a></li>
	<li><a href="Background+to+ServiceMix" title="Background to ServiceMix">Background to ServiceMix</a></li>
	<li><a href="News" title="News">News</a></li>
	<li><a href="FAQ" title="FAQ">FAQ</a></li>
	<li><a href="Download" title="Download">Download</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Community"></a>Community</h3>

<ul class="alternate" type="square">
	<li><span class="nobr"><a href="http://docs.codehaus.org/pages/listpages.action?key=SM">Wiki</a></span></li>
	<li><a href="Discussion+Forums" title="Discussion Forums">Discussion Forums</a></li>
	<li><a href="Mailing+Lists" title="Mailing Lists">Mailing Lists</a></li>
	<li><a href="Contributing" title="Contributing">Contributing</a></li>
	<li><a href="Team" title="Team">Team</a></li>
	<li><a href="Users" title="Users">Users</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Documentation"></a>Documentation</h3>

<ul class="alternate" type="square">
	<li><a href="Getting+Started" title="Getting Started">Getting Started</a></li>
	<li><a href="Running" title="Running">Running</a></li>
	<li><a href="Examples" title="Examples">Examples</a></li>
	<li><a href="Use+Cases" title="Use Cases">Use Cases</a></li>
	<li><a href="Configuration" title="Configuration">Configuration</a></li>
	<li><a href="Xml+Reference" title="Xml Reference">Xml Reference</a></li>
	<li><a href="Management" title="Management">Management</a></li>
	<li><a href="Architecture" title="Architecture">Architecture</a></li>
	<li><a href="Clustering" title="Clustering">Clustering</a></li>
	<li><a href="NMR+Flows" title="NMR Flows">NMR Flows</a></li>
	<li><a href="Articles" title="Articles">Articles</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Reference"></a>Reference</h3>

<ul class="alternate" type="square">
	<li><span class="nobr"><a href="http://java.sun.com/integration/1.0/docs/sdk/api/index.html">JBI API</a></span></li>
	<li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix-core/apidocs/">JavaDocs Core</a></span></li>
	<li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix-components/apidocs/">JavaDocs Components</a></span></li>
	<li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix-console/apidocs/">JavaDocs Console</a></span></li>
	<li><a href="Glossary" title="Glossary">Glossary</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Features"></a>Features</h3>

<ul class="alternate" type="square">
	<li><a href="Components" title="Components">Components</a></li>
	<li><a href="Routing" title="Routing">Routing</a></li>
	<li><a href="Transformation" title="Transformation">Transformation</a></li>
	<li><a href="Spring+Client+Toolkit" title="Spring Client Toolkit">Spring Client Toolkit</a></li>
	<li><a href="Client+API" title="Client API">Client API</a></li>
	<li><a href="POJO+support" title="POJO support">POJO support</a></li>
	<li><a href="Expressions" title="Expressions">Expressions</a></li>
	<li><a href="Component+helper+classes" title="Component helper classes">Component helper classes</a></li>
	<li><a href="Ant+Tasks" title="Ant Tasks">Ant Tasks</a></li>
	<li><a href="JMX+Console" title="JMX Console">JMX Console</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Integration"></a>Integration</h3>

<ul class="alternate" type="square">
	<li><a href="Spring+support" title="Spring support">Spring support</a></li>
	<li><a href="Geronimo+Integration" title="Geronimo Integration">Geronimo Integration</a></li>
	<li><a href="JBoss+Deployer" title="JBoss Deployer">JBoss Integration</a></li>
	<li><a href="Tomcat+Integration" title="Tomcat Integration">Tomcat Integration</a></li>
	<li><a href="JOnAS+Integration" title="JOnAS Integration">JOnAS Integration</a></li>
	<li><a href="JNDI+configuration" title="JNDI configuration">JNDI configuration</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-ServiceMixComponents"></a>ServiceMix Components</h3>

<ul class="alternate" type="square">
	<li><a href="BPEL" title="BPEL">BPEL</a></li>
	<li><a href="Cache" title="Cache">Cache</a></li>
	<li><a href="Drools" title="Drools">Drools</a></li>
	<li><a href="Email" title="Email">Email</a></li>
	<li><a href="File" title="File">File</a></li>
	<li><a href="FTP" title="FTP">FTP</a></li>
	<li><a href="Groovy" title="Groovy">Groovy</a></li>
	<li><a href="HTTP" title="HTTP">HTTP</a></li>
	<li><a href="Jabber" title="Jabber">Jabber</a></li>
	<li><a href="JAX+WS" title="JAX WS">JAX WS</a></li>
	<li><a href="JCA" title="JCA">JCA</a></li>
	<li><a href="JMS" title="JMS">JMS</a></li>
	<li><a href="Quartz" title="Quartz">Quartz</a></li>
	<li><a href="Reflection" title="Reflection">Reflection</a></li>
	<li><a href="RSS" title="RSS">RSS</a></li>
	<li><a href="SAAJ" title="SAAJ">SAAJ</a></li>
	<li><a href="Scripting" title="Scripting">Scripting</a></li>
	<li><a href="ServiceMix" title="ServiceMix">ServiceMix</a></li>
	<li><a href="Validation" title="Validation">Validation</a></li>
	<li><a href="XFire" title="XFire">XFire</a></li>
	<li><a href="XPath+Router" title="XPath Router">XPath Router</a></li>
	<li><a href="XSLT" title="XSLT">XSLT</a></li>
	<li><a href="XSQL" title="XSQL">XSQL</a></li>
	<li><a href="VFS" title="VFS">VFS</a></li>
	<li><a href="WSIF" title="WSIF">WSIF</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Tooling"></a>Tooling</h3>

<ul class="alternate" type="square">
	<li><a href="Visualisation" title="Visualisation">Visualisation</a></li>
	<li><a href="Eclipse+plugin" title="Eclipse plugin">Eclipse plugin</a></li>
	<li><a href="JBoss+Deployer" title="JBoss Deployer">JBoss Deployer</a></li>
	<li><a href="WAR+Deployment" title="WAR Deployment">WAR Deployment</a></li>
	<li><a href="Maven+JBI+plugin" title="Maven JBI plugin">Maven JBI plugin</a></li>
	<li><a href="Maven+SAR+plugin" title="Maven SAR plugin">Maven SAR plugin</a></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-OtherJBIsoftware"></a>Other JBI software</h3>

<ul class="alternate" type="square">
	<li><span class="nobr"><a href="http://incubator.apache.org/projects/ode.html">Apache ODE</a></span></li>
	<li><span class="nobr"><a href="http://forge.objectweb.org/projects/celtix/">Celtix</a></span></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-RelatedProjects"></a>Related Projects</h3>

<ul class="alternate" type="square">
	<li><span class="nobr"><a href="http://activemq.codehaus.org/">ActiveMQ</a></span></li>
	<li><span class="nobr"><a href="http://jencks.org/">Jencks</a></span></li>
	<li><span class="nobr"><a href="http://lingo.codehaus.org/">Lingo</a></span></li>
	<li><span class="nobr"><a href="http://activesoap.codehaus.org/">ActiveSOAP</a></span></li>
	<li><span class="nobr"><a href="http://www.springframework.org/">Spring</a></span></li>
	<li><span class="nobr"><a href="http://geronimo.apache.org/">Geronimo</a></span></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Support"></a>Support</h3>

<ul class="alternate" type="square">
	<li><span class="nobr"><a href="http://issues.apache.org/activemq/browse/SM">Issues</a></span></li>
	<li><span class="nobr"><a href="http://issues.apache.org/activemq/browse/SM?report=com.atlassian.jira.plugin.system.project:roadmap-panel">Roadmap</a></span></li>
	<li><span class="nobr"><a href="http://issues.apache.org/activemq/browse/SM?report=com.atlassian.jira.plugin.system.project:changelog-panel">Change log</a></span></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Developers"></a>Developers</h3>

<ul class="alternate" type="square">
	<li><a href="Source" title="Source">Source</a></li>
	<li><a href="Roadmap" title="Roadmap">Roadmap</a></li>
	<li><a href="Ideas" title="Ideas">Ideas</a></li>
	<li><a href="Becoming+a+committer" title="Becoming a committer">Becoming a committer</a></li>
	<li><a href="Release+Guide" title="Release Guide">Release Guide</a></li>
	<li><span class="nobr"><a href="http://ci.codehaus.org/beetlejuice/viewProjectSummary.action?projectName=ServiceMix">BeetleJuice</a></span></li>
	<li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/clover/">Clover Report</a></span></li>
	<li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/xref/index.html">Source XRef</a></span></li>
	<li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/xref-test/index.html">Test Source XRef</a></span></li>
	<li><span class="nobr"><a href="http://servicemix.codehaus.org/maven/servicemix.xsd.html">XSD</a></span></li>
</ul>


</div><div class="section_3"><h3><a name="Navigation-Toolsweuse"></a>Tools we use</h3>

<p><span class="nobr"><a href="http://www.yourkit.com"><img src="http://incubator.apache.org/servicemix/download/attachments/25208/yourkit.jpg" align="absmiddle" border="0"/></a></span></p></div>
          
          <div class="section_3">
            <h3>Feeds</h3>
            <ul class="feedList">
              <li><a class="rss" href="http://docs.codehaus.org/spaces/rss.action?key=SM&amp;newPages=false">Site</a></li>
              <li><a class="rss" href="http://docs.codehaus.org/spaces/blogrss.action?key=SM">News</a></li>
            </ul>
          </div>
        </div>
      </td>
      <td id="umain">
        <div class="content">
          
          <div id="upage_title">servicemix-jms</div>
          <div id="uads">


<center>

</center>

          </div>
          <div class="section_1"><h1><a name="servicemix-jms-servicemixjms"></a>servicemix-jms</h1>

<p>ServiceMix ships with a JBI compliant JMS binding component named servicemix-jms.</p>

<p>Here are the main features:</p>
<ul>
	<li>JBI compliant Binding Component</li>
	<li>Usable in a lightweight mode in servicemix.xml configuration files</li>
	<li>SOAP 1.1 and 1.2 support</li>
	<li>MIME attachments</li>
	<li>WS-Addressing support</li>
	<li>WSDL based and XBean based deployments</li>
	<li>Support for all MEPs as consumers or providers</li>
</ul>


<div class="section_2"><h2><a name="servicemix-jms-Installation"></a>Installation</h2>

<p>Installing the servicemix-jms component can be done in several ways:</p>
<ul>
	<li>drop the installer zip in an hotdeploy directory monitored by ServiceMix</li>
	<li>using <a href="Ant+Tasks" title="Ant Tasks">ant tasks</a></li>
</ul>


<p>Note that when using ant tasks, the component is not started, you will have to start it manually using ant tasks or a console.</p>

</div><div class="section_2"><h2><a name="servicemix-jms-Configuration"></a>Configuration</h2>

<p>Several parameters can be configured using a JMX console.</p>
<table cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><colgroup><col width="24"/><col/></colgroup><tr><td valign="top"><img src="http://docs.codehaus.org/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"/></td><td><b class="strong">Configuration</b><br/>
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> Name </th>
<th class="confluenceTh"> Type </th>
<th class="confluenceTh"> Description </th>
<th class="confluenceTh"> Default </th>
</tr>
<tr>
<td class="confluenceTd"> userName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> UserName used to create a connection </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> password </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> Password used to create a connection </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> jndiInitialContextFactory </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> Default JNDI InitialContext factory </td>
<td class="confluenceTd"> false </td>
</tr>
<tr>
<td class="confluenceTd"> jndiProviderUrl </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> Default JNDI provider url </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> jndiName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> Default JNDI name to lookup the JMS ConnectionFactory </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
</tbody></table></td></tr></table>
<p>&nbsp;<br/>
&nbsp;</p>

</div><div class="section_2"><h2><a name="servicemix-jms-XBeandeployment"></a>XBean deployment</h2>

<p>You can deploy Service Units containing a file named xbean.xml for activating consumer and provider endpoints.</p>

<p>This xml file should respect the given syntax, though this is a spring based xml configuration file from where all beans of class <span class="nobr"><a href="http://servicemix.org/maven/servicemix-jms/apidocs/org/apache/servicemix/jms/JmsEndpoint.html">JmsEndpoint</a></span> are retrieved.<br/>
See a full example <span class="nobr"><a href="http://svn.apache.org/repos/asf/incubator/servicemix/trunk/servicemix-jms/src/test/resources/xbean/xbean.xml">here</a></span>.&nbsp; Note that you have to define the jms namespace with</p>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;beans <span class="code-keyword">xmlns:jms</span>=<span class="code-quote">"http://servicemix.apache.org/jms/1.0"</span>&gt;</span>
    ...
<span class="code-tag">&lt;/beans&gt;</span></pre>
</div></div>
<p>Any numbers of endpoints can be specified in the xbean.xml file.</p>

<div class="section_3"><h3><a name="servicemix-jms-Consumerendpoint"></a>Consumer endpoint</h3>

<p>A consumer endpoint is a server-side http endpoint that will consumer plain JMS, or JMS+SOAP requests and send them into the NMR to a given JBI endpoint, which is called the proxied endpoint.</p>

<p>Following is an example of an jms consumer endpoint.</p>
<div class="code"><div class="codeContent">
<pre class="code-xml">&lt;jms:endpoint service=<span class="code-quote">"test:MyConsumerService"</span>
              endpoint=<span class="code-quote">"jms"</span>
              targetService=<span class="code-quote">"test:MyConsumerService"</span>
              targetEndpoint=<span class="code-quote">"myConsumer"</span>
              role=<span class="code-quote">"consumer"</span> 
              destinationStyle=<span class="code-quote">"queue"</span>
              jmsProviderDestinationName=<span class="code-quote">"queue/A"</span>
              jndiConnectionFactoryName=<span class="code-quote">"ConnectionFactory"</span>
              defaultMep=<span class="code-quote">"http://www.w3.org/2004/08/wsdl/in-out"</span>
              defaultOperation=<span class="code-quote">"test:Echo"</span> /&gt;</pre>
</div></div>
<table cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><colgroup><col width="24"/><col/></colgroup><tr><td valign="top"><img src="http://docs.codehaus.org/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"/></td><td><b class="strong">Consumer endpoint attributes</b><br/>
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> Name </th>
<th class="confluenceTh"> Type </th>
<th class="confluenceTh"> Description </th>
<th class="confluenceTh"> Required </th>
</tr>
<tr>
<td class="confluenceTd"> service </td>
<td class="confluenceTd"> QName </td>
<td class="confluenceTd"> the service name of the proxied endpoint </td>
<td class="confluenceTd"> yes </td>
</tr>
<tr>
<td class="confluenceTd"> endpoint </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> the endpoint name of the proxied endpoint </td>
<td class="confluenceTd"> yes </td>
</tr>
<tr>
<td class="confluenceTd"> interfaceName </td>
<td class="confluenceTd"> QName </td>
<td class="confluenceTd"> the interface name of the proxied endpoint </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> targetService </td>
<td class="confluenceTd"> QName </td>
<td class="confluenceTd"> the service name of the target endpoint </td>
<td class="confluenceTd"> no (defaults to the service attribute) </td>
</tr>
<tr>
<td class="confluenceTd"> targetEndpoint </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> the endpoint name of the target endpoint </td>
<td class="confluenceTd"> no (defaults to the endpoint attribute) </td>
</tr>
<tr>
<td class="confluenceTd"> targetInterfaceName </td>
<td class="confluenceTd"> QName </td>
<td class="confluenceTd"> the interface name of the target endpoint </td>
<td class="confluenceTd">&nbsp;</td>
</tr>
<tr>
<td class="confluenceTd"> role </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> must be 'consumer' </td>
<td class="confluenceTd"> yes </td>
</tr>
<tr>
<td class="confluenceTd"> defaultMEP </td>
<td class="confluenceTd"> URI </td>
<td class="confluenceTd"> the default MEP uri to use </td>
<td class="confluenceTd"> no </td>
</tr>
<tr>
<td class="confluenceTd"> defaultOperation </td>
<td class="confluenceTd"> QName </td>
<td class="confluenceTd"> the default operation name to set on the JBI exchange. if not set, it defaults to the QName of the root xml element </td>
<td class="confluenceTd"> no </td>
</tr>
<tr>
<td class="confluenceTd"> soap </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> if set, the component will parse the soap requests and send the content into the NMR </td>
<td class="confluenceTd"> no (defaults to false) </td>
</tr>
<tr>
<td class="confluenceTd"> soapVersion </td>
<td class="confluenceTd"> string </td>
<td class="confluenceTd"> can be set to '1.1' to force the use of SOAP 1.1 messages </td>
<td class="confluenceTd"> no </td>
</tr>
<tr>
<td class="confluenceTd"> wsdlResource </td>
<td class="confluenceTd"> <span class="nobr"><a href="http://springframework.org/docs/api/org/springframework/core/io/Resource.html">Spring resource</a></span> </td>
<td class="confluenceTd"> if set, the wsdl will be retrieved from the given Spring resource </td>
<td class="confluenceTd"> no </td>
</tr>
<tr>
<td class="confluenceTd"> initialContextFactory </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> jndiProviderURL </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> destinationStyle </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> jndiConnectionFactoryName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> jndiDestinationName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (one of jndiDestinationName or jmsProviderDestinationName) </td>
</tr>
<tr>
<td class="confluenceTd"> jmsProviderDestinationName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (one of jndiDestinationName or jmsProviderDestinationName) </td>
</tr>
</tbody></table></td></tr></table>
<p>The <b>targetService</b>, <b>targetEndpoint</b> and <b>targetInterfaceName</b> attributes can be used to specify the routing method to use (routing by interface, service or endpoint) and is also useful to allow several proxy endpoints to be created for the same JBI endpoint.  For example to create an JMS only endpoint and an JMS+SOAP endpoint, both jms endpoints will have the same targetEndpoint and targetService, but they must have different endpoint names.</p>

</div><div class="section_3"><h3><a name="servicemix-jms-Providerendpoint"></a>Provider endpoint</h3>

<p>A provider endpoint is a client-side jbi endpoint which can receive requests from the NMR and send them to a given url where the service is provided.</p>

<p>Here is an example of an http provider endpoint:</p>
<div class="code"><div class="codeContent">
<pre class="code-xml">&lt;jms:endpoint service=<span class="code-quote">"test:MyProviderService"</span>
              endpoint=<span class="code-quote">"myProvider"</span>
              role=<span class="code-quote">"provider"</span> 
              destinationStyle=<span class="code-quote">"queue"</span>
              jmsProviderDestinationName=<span class="code-quote">"queue/A"</span>
              jndiConnectionFactoryName=<span class="code-quote">"ConnectionFactory"</span>
              wsdlResource=<span class="code-quote">"classpath:provider.wsdl"</span> /&gt;</pre>
</div></div>
<table cellpadding="5" width="85%" cellspacing="8px" class="infoMacro" border="0" align="center"><colgroup><col width="24"/><col/></colgroup><tr><td valign="top"><img src="http://docs.codehaus.org/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"/></td><td><b class="strong">Provider endpoint attributes</b><br/>
<table class="confluenceTable"><tbody>
<tr>
<th class="confluenceTh"> Name </th>
<th class="confluenceTh"> Type </th>
<th class="confluenceTh"> Description </th>
<th class="confluenceTh"> Required </th>
</tr>
<tr>
<td class="confluenceTd"> service </td>
<td class="confluenceTd"> QName </td>
<td class="confluenceTd"> the service name of the exposed jbi endpoint </td>
<td class="confluenceTd"> yes </td>
</tr>
<tr>
<td class="confluenceTd"> endpoint </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> the endpoint name of the exposed jbi endpoint </td>
<td class="confluenceTd"> yes </td>
</tr>
<tr>
<td class="confluenceTd"> interfaceName </td>
<td class="confluenceTd"> QName </td>
<td class="confluenceTd"> the interface name of the exposed jbi endpoint </td>
<td class="confluenceTd"> no </td>
</tr>
<tr>
<td class="confluenceTd"> role </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd"> must be 'provider' </td>
<td class="confluenceTd"> yes </td>
</tr>
<tr>
<td class="confluenceTd"> locationURI </td>
<td class="confluenceTd"> URI </td>
<td class="confluenceTd"> the http url of the target service </td>
<td class="confluenceTd"> yes </td>
</tr>
<tr>
<td class="confluenceTd"> soap </td>
<td class="confluenceTd"> boolean </td>
<td class="confluenceTd"> if set, the component will parse the soap requests and send the content into the NMR </td>
<td class="confluenceTd"> no (defaults to false) </td>
</tr>
<tr>
<td class="confluenceTd"> wsdlResource </td>
<td class="confluenceTd"> <span class="nobr"><a href="http://springframework.org/docs/api/org/springframework/core/io/Resource.html">Spring resource</a></span> </td>
<td class="confluenceTd"> if set, the wsdl will be retrieved from the given Spring resource </td>
<td class="confluenceTd"> no </td>
</tr>
<tr>
<td class="confluenceTd"> initialContextFactory </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> jndiProviderURL </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> destinationStyle </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> jndiConnectionFactoryName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (unless a default one is provided on the jms component configuration) </td>
</tr>
<tr>
<td class="confluenceTd"> jndiDestinationName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (one of jndiDestinationName or jmsProviderDestinationName) </td>
</tr>
<tr>
<td class="confluenceTd"> jmsProviderDestinationName </td>
<td class="confluenceTd"> String </td>
<td class="confluenceTd">&nbsp;</td>
<td class="confluenceTd"> yes (one of jndiDestinationName or jmsProviderDestinationName) </td>
</tr>
</tbody></table></td></tr></table>

</div></div><div class="section_2"><h2><a name="servicemix-jms-WSDLDeployment"></a>WSDL Deployment</h2>

<p>In addition to xbean based deployment, the component accepts WSDL-based deployment.<br/>
The service unit may contain any number of WSDL files, each one being parsed and activating the specified endpoints.<br/>
To retrieve the necessary informations from the wsdl, the component can recognize a jms extension to provide JNDI informations and a jbi extension which specifies the role of the component and the default MEP to use for JBI exchanges.</p>

<p>Here is an example of a WSDL:</p>
<div class="code"><div class="codeContent">
<pre class="code-xml">&lt;definitions name='Echo' 
             targetNamespace='http://jms.servicemix.org/Test' 
             <span class="code-keyword">xmlns:tns</span>='http://jms.servicemix.org/Test' 
             <span class="code-keyword">xmlns:jms</span>='http://servicemix.org/wsdl/jms/' 
             xmlns='http://schemas.xmlsoap.org/wsdl/'
             <span class="code-keyword">xmlns:jbi</span>='http://servicemix.org/wsdl/jbi/'&gt;

    <span class="code-tag">&lt;portType name='EchoInterface'&gt;</span>
    <span class="code-tag">&lt;/portType&gt;</span>

    <span class="code-tag">&lt;binding name='EchoJmsBinding' type='tns:EchoInterface'&gt;</span>
        <span class="code-tag">&lt;jms:binding /&gt;</span>
    <span class="code-tag">&lt;/binding&gt;</span>

    <span class="code-tag">&lt;service name='Echo'&gt;</span>
        <span class="code-tag">&lt;port name='EchoEndpoint' binding='tns:EchoJmsBinding'&gt;</span>
            &lt;jms:address destinationStyle=<span class="code-quote">"queue"</span>
                         jmsProviderDestinationName=<span class="code-quote">"queue/A"</span>
                         jndiConnectionFactoryName=<span class="code-quote">"ConnectionFactory"</span>/&gt;
            &lt;jbi:endpoint role=<span class="code-quote">"consumer"</span>
                          defaultOperation=<span class="code-quote">"tns:Echo"</span>/&gt;
        <span class="code-tag">&lt;/port&gt;</span>
    <span class="code-tag">&lt;/service&gt;</span>
<span class="code-tag">&lt;/definitions&gt;</span></pre>
</div></div>

</div><div class="section_2"><h2><a name="servicemix-jms-Lightweightmode"></a>Lightweight mode</h2>

<p>The servicemix-jms component can also be configured in a spring/xbean configuration file, for use in an embedded ServiceMix.<br/>
Here is an example of such a configuration:</p>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;sm:activationSpec&gt;</span>
  <span class="code-tag">&lt;sm:component&gt;</span>
    <span class="code-tag">&lt;jms:component&gt;</span>
      <span class="code-tag">&lt;jms:endpoints&gt;</span>
        &lt;jms:endpoint service=<span class="code-quote">"test:MyConsumerService"</span>
                      endpoint=<span class="code-quote">"myConsumer"</span>
                      role=<span class="code-quote">"consumer"</span> 
                      defaultMep=<span class="code-quote">"http://www.w3.org/2004/08/wsdl/in-out"</span>
                      destinationStyle=<span class="code-quote">"queue"</span>
                      jmsProviderDestinationName=<span class="code-quote">"queue/A"</span>
                      jndiConnectionFactoryName=<span class="code-quote">"jms/ConnectionFactory"</span> /&gt;

        &lt;jms:endpoint service=<span class="code-quote">"test:MyProviderService"</span>
                      endpoint=<span class="code-quote">"myProvider"</span>
                      role=<span class="code-quote">"provider"</span> 
                      destinationStyle=<span class="code-quote">"queue"</span>
                      jmsProviderDestinationName=<span class="code-quote">"queue/A"</span>
                      connectionFactory=<span class="code-quote">"#connectionFactory"</span> /&gt;
      <span class="code-tag">&lt;/jms:endpoints&gt;</span>
    <span class="code-tag">&lt;/jms:component&gt;</span>
  <span class="code-tag">&lt;/sm:component&gt;</span>
<span class="code-tag">&lt;/sm:activationSpec&gt;</span></pre>
</div></div>

<table cellpadding="5" width="85%" cellspacing="8px" class="warningMacro" border="0" align="center"><colgroup><col width="24"/><col/></colgroup><tr><td valign="top"><img src="http://docs.codehaus.org/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"/></td><td><b class="strong">Classpath issues when embedding servicemix-jms component</b><br/>
<p>When using the servicemix.xml configuration file to create jms endpoints, you must include the servicemix-jms-xxx.jar in your classpath.<br/>
You will find this file inside the component installer (./components/servicemix-jms-xxx.zip).<br/>
Failing this, an IllegalArgumentException will be thrown with the following message:<br/>
    Component name: xxxxxx is bound to an object which is not a JBI component, it is of type: javax.xml.namespace.QName</p></td></tr></table>

</div><div class="section_2"><h2><a name="servicemix-jms-AccessingWSDLs"></a>Accessing WSDLs</h2>

<p>WSDLs for consumer endpoints are retrieved using the following method:</p>
<ul>
	<li>for a WSDL based deployed endpoint, the WSL will be used as is</li>
	<li>for an XBean based deployed endpoint, the WSDL will be retrieved from the wsdlResource attribute</li>
	<li>if this information is not provided, the component will try to generate a WSDL by retrieving the target endpoint WSDL and adding the relevant informations to it.</li>
</ul>


<p>WSDLs are accessible on the MBean for the Endpoint using a JMX console.</p>

</div><div class="section_2"><h2><a name="servicemix-jms-WSAddressing"></a>WS-Addressing</h2>

<p>When used on a SOAP consumer endpoint, servicemix-jms handles the WS-Adressing Action and To headers.</p>

<div class="section_3"><h3><a name="servicemix-jms-wsa%3AAction"></a>wsa:Action</h3>

<p>The wsa:Action header can be used to specify the target interface name and operation to use for the JBI exchange.</p>

<p>The header uses the following syntax:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">[target namespace][delimiter][<span class="code-keyword">interface</span> name][delimiter][operation name]</pre>
</div></div>
<p>where:</p>
<ul>
	<li>[delimiter] is ":" when the [target namespace] is a URN, otherwise "/".</li>
	<li>[target namespace] is the namespace of the interface.</li>
	<li>[interface name] is the name of the interface.</li>
	<li>[operation name] is the name of the operation.</li>
</ul>


<p>For example, the following header</p>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;wsa:Action&gt;</span>http://example.com/stockquote/StockQuoteInterface/GetLastTradePrice<span class="code-tag">&lt;/wsa:Action&gt;</span></pre>
</div></div>
<p>will be used to address the JBI exchange with the following properties:</p>
<ul>
	<li>interface name: {http://example.com/stockquote\}StockQuoteInterface</li>
	<li>operation name: {http://example.com/stockquote\}GetLastTradePrice</li>
</ul>


</div><div class="section_3"><h3><a name="servicemix-jms-wsa%3ATo"></a>wsa:To</h3>

<p>The wsa:To header specifies the target JBI service name and endpoint name.</p>

<p>The header uses the following syntax:</p>
<div class="code"><div class="codeContent">
<pre class="code-java">[target namespace][delimiter][service name][delimiter][endpoint name]</pre>
</div></div>
<p>where:</p>
<ul>
	<li>[delimiter] is ":" when the [target namespace] is a URN, otherwise "/".</li>
	<li>[target namespace] is the namespace of the interface.</li>
	<li>[service name] is the name of the service.</li>
	<li>[endpoint name] is the name of the endpoint.</li>
</ul>


<p>For example, the following header</p>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;wsa:To&gt;</span>urn:example:stockquote:StockQuoteService:JBIEndpoint<span class="code-tag">&lt;/wsa:To&gt;</span></pre>
</div></div>
<p>will be used to address the JBI exchange with the following properties:</p>
<ul>
	<li>service name: {urn:example:stockquote}StockQuoteService</li>
	<li>endpoint name: JBIEndpoint</li>
</ul>
</div></div></div>
        </div>
<div style="text-align: center; width: 100%; padding-top: 1cm;padding-bottom: 1cm">


</div>
</td>
    <tr>
    <tr id="ulayout_bottom">
      <td colspan="2" id="ufooter">
        <div class="content">
          
          
          <div>
            <a class="editPage" href="http://docs.codehaus.org/pages/editpage.action?spaceKey=SM&amp;title=servicemix-jms"><img src="http://www.codehaus.org/edit.gif" border="0">[&nbsp;edit&nbsp;]</a>
          </div>
        </div>
      </td>
    </tr>
  </table>
</html>
