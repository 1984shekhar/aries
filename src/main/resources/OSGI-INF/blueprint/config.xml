<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<components xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

    <type-converters>
            <component id="converter1" class="org.apache.geronimo.blueprint.sample.DateTypeConverter">
                <property name="format" value="yyyy.MM.dd"/>
            </component>
            <ref component="converter2"/>
    </type-converters>

    <component id="foo" class="org.apache.geronimo.blueprint.sample.Foo">
        <property name="a" value="5" />
        <property name="b" value="10" />
        <property name="bar" ref="bar" />
        <property name="currency">
              <value>PLN</value>
        </property>
        <property name="date">
              <value>2009.04.17</value>
        </property>
    </component>

    <component id="bar" class="org.apache.geronimo.blueprint.sample.Bar">
        <property name="value"><value>Hello FooBar</value></property>
        <property name="context" ref="bundleContext"/>
        <property name="list">
            <list>
                <value>a list element</value>
                <value type = "java.lang.Integer">5</value>
            </list>        
        </property>
    </component>

    <component id="converter2" class="org.apache.geronimo.blueprint.sample.CurrencyTypeConverter"/>

    <service ref="foo" auto-export="all-classes">
        <service-properties>
            <entry key="key" value="value"/>
        </service-properties>
        <registration-listener ref="fooRegistrationListener"
                               registration-method="serviceRegistered"
                               unregistration-method="serviceUnregistered"/>
    </service>
    
    <component id="fooRegistrationListener" class="org.apache.geronimo.blueprint.sample.FooRegistrationListener"/>

    <reference id="ref" interface="org.apache.geronimo.blueprint.sample.Foo">
    </reference>

    <reference id="ref2" interface="org.apache.geronimo.blueprint.sample.InterfaceA" timeout="100">
        <listener bind-method="bind" unbind-method="unbind" ref="bindingListener" />
    </reference>

    <component id="bindingListener" class="org.apache.geronimo.blueprint.sample.BindingListener"/>

    <ref-list id="ref-list" interface="org.apache.geronimo.blueprint.sample.InterfaceA">
        <listener bind-method="bind" unbind-method="unbind" ref="listBindingListener" />
    </ref-list>

    <component id="listBindingListener" class="org.apache.geronimo.blueprint.sample.BindingListener"/>

</components>

